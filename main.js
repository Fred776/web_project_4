(()=>{var t={588:(t,e,n)=>{function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var o=function(t){"use strict";var e,n=Object.prototype,o=n.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",u=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function l(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,n){return t[e]=n}}function s(t,e,n,r){var o=e&&e.prototype instanceof v?e:v,i=Object.create(o.prototype),a=new B(r||[]);return i._invoke=function(t,e,n){var r=h;return function(o,i){if(r===d)throw new Error("Generator is already running");if(r===y){if("throw"===o)throw i;return I()}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var u=C(a,n);if(u){if(u===_)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===h)throw r=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=d;var c=f(t,e,n);if("normal"===c.type){if(r=n.done?y:p,c.arg===_)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r=y,n.method="throw",n.arg=c.arg)}}}(t,n,a),i}function f(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}t.wrap=s;var h="suspendedStart",p="suspendedYield",d="executing",y="completed",_={};function v(){}function m(){}function b(){}var g={};l(g,a,(function(){return this}));var k=Object.getPrototypeOf,E=k&&k(k(x([])));E&&E!==n&&o.call(E,a)&&(g=E);var w=b.prototype=v.prototype=Object.create(g);function S(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function L(t,e){function n(i,a,u,c){var l=f(t[i],t,a);if("throw"!==l.type){var s=l.arg,h=s.value;return h&&"object"===r(h)&&o.call(h,"__await")?e.resolve(h.__await).then((function(t){n("next",t,u,c)}),(function(t){n("throw",t,u,c)})):e.resolve(h).then((function(t){s.value=t,u(s)}),(function(t){return n("throw",t,u,c)}))}c(l.arg)}var i;this._invoke=function(t,r){function o(){return new e((function(e,o){n(t,r,e,o)}))}return i=i?i.then(o,o):o()}}function C(t,n){var r=t.iterator[n.method];if(r===e){if(n.delegate=null,"throw"===n.method){if(t.iterator.return&&(n.method="return",n.arg=e,C(t,n),"throw"===n.method))return _;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return _}var o=f(r,t.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,_;var i=o.arg;return i?i.done?(n[t.resultName]=i.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,_):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,_)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function j(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function B(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function x(t){if(t){var n=t[a];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,i=function n(){for(;++r<t.length;)if(o.call(t,r))return n.value=t[r],n.done=!1,n;return n.value=e,n.done=!0,n};return i.next=i}}return{next:I}}function I(){return{value:e,done:!0}}return m.prototype=b,l(w,"constructor",b),l(b,"constructor",m),m.displayName=l(b,c,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,l(t,c,"GeneratorFunction")),t.prototype=Object.create(w),t},t.awrap=function(t){return{__await:t}},S(L.prototype),l(L.prototype,u,(function(){return this})),t.AsyncIterator=L,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var a=new L(s(e,n,r,o),i);return t.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},S(w),l(w,c,"Generator"),l(w,a,(function(){return this})),l(w,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},t.values=x,B.prototype={constructor:B,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(j),!t)for(var n in this)"t"===n.charAt(0)&&o.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function r(r,o){return u.type="throw",u.arg=t,n.next=r,o&&(n.method="next",n.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],u=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var c=o.call(a,"catchLoc"),l=o.call(a,"finallyLoc");if(c&&l){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&o.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var i=r;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,_):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),_},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),j(n),_}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;j(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:x(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),_}},t}("object"===r(t=n.nmd(t))?t.exports:{});try{regeneratorRuntime=o}catch(t){"object"===("undefined"==typeof globalThis?"undefined":r(globalThis))?globalThis.regeneratorRuntime=o:Function("r","regeneratorRuntime = r")(o)}},827:(t,e,n)=>{"use strict";t.exports=n.p+"3755f99ca093e6e21308.svg"},664:(t,e,n)=>{"use strict";t.exports=n.p+"3db4c7ac6cafc081dcf6.svg"}},e={};function n(r){var o=e[r];if(void 0!==o)return o.exports;var i=e[r]={id:r,loaded:!1,exports:{}};return t[r](i,i.exports,n),i.loaded=!0,i.exports}n.nmd=t=>(t.paths=[],t.children||(t.children=[]),t),n.p="",(()=>{"use strict";n(588);var t=document.querySelector(".modal__form_type_edit"),e=document.querySelector(".modal__form_type_edit-avatar"),r=document.querySelector(".modal__form_type_add"),o=document.querySelector(".places__list"),i=document.querySelector(".profile__edit-button"),a=document.querySelector(".profile__add-button"),u=(document.querySelectorAll(".card__delete-button"),document.querySelector(".modal__input_content_name")),c=document.querySelector(".modal__input_content_profession"),l=(document.querySelector(".modal__input_content_avatar-link"),{_inputSelector:".modal__input",_submitButtonSelector:".modal__save-button",_inputErrorClass:".modal__input-error",_activeInputErrorClass:"modal__input-error_active",_inactiveButtonClass:"modal__save-button_inactive"}),s=document.querySelector(".modal__image"),f=document.querySelector(".modal__caption"),h=document.querySelector(".header__logo"),p=document.querySelector(".profile__avatar-button"),d=document.querySelector(".profile__avatar"),y=n(827),_=n(664);function v(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var m=function(){function t(e){var n=e.baseUrl,r=e.authToken;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._baseUrl=n,this._authToken=r}var e,n;return e=t,(n=[{key:"getUserInfo",value:function(){var t=this;return fetch("".concat(this._baseUrl,"/users/me"),{headers:{authorization:this._authToken}}).then((function(e){return t._getResponseData(e)}))}},{key:"getCards",value:function(){var t=this;return fetch("".concat(this._baseUrl,"/cards"),{headers:{authorization:this._authToken}}).then((function(e){return t._getResponseData(e)}))}},{key:"editUserInfo",value:function(t){var e=this;return fetch("".concat(this._baseUrl,"/users/me"),{method:"PATCH",headers:{authorization:this._authToken,"Content-Type":"application/json"},body:JSON.stringify({name:t.name,about:t.about})}).then((function(t){return e._getResponseData(t)}))}},{key:"editUserAvatar",value:function(t){var e=this;return fetch("".concat(this._baseUrl,"/users/me/avatar"),{method:"PATCH",headers:{authorization:this._authToken,"Content-type":"application/json"},body:JSON.stringify({avatar:t.avatar})}).then((function(t){return e._getResponseData(t)}))}},{key:"addCard",value:function(t){var e=this;return fetch("".concat(this._baseUrl,"/cards"),{method:"POST",headers:{authorization:this._authToken,"Content-Type":"application/json"},body:JSON.stringify({name:t.name,link:t.link})}).then((function(t){return e._getResponseData(t)}))}},{key:"deleteCard",value:function(t){var e=this;return fetch("".concat(this._baseUrl,"/cards/").concat(t),{method:"DELETE",headers:{authorization:this._authToken,"Content-Type":"application/json"}}).then((function(t){return e._getResponseData(t)}))}},{key:"addLike",value:function(t){var e=this;return fetch("".concat(this._baseUrl,"/cards/likes/").concat(t),{method:"PUT",headers:{authorization:this._authToken,"Content-Type":"application/json"}}).then((function(t){return e._getResponseData(t)}))}},{key:"deleteLike",value:function(t){var e=this;return fetch("".concat(this._baseUrl,"/cards/likes/").concat(t),{method:"DELETE",headers:{authorization:this._authToken,"Content-Type":"application/json"}}).then((function(t){return e._getResponseData(t)}))}},{key:"_getResponseData",value:function(t){return t.ok?t.json():Promise.reject("Err: ".concat(t.status))}}])&&v(e.prototype,n),t}();function b(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var g=function(){function t(e,n,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._profileName=document.querySelector(e),this._profileProfession=document.querySelector(n),this._profileAvatar=r}var e,n;return e=t,(n=[{key:"getUserInfo",value:function(){return{name:this._profileName.textContent,profession:this._profileProfession.textContent}}},{key:"getId",value:function(){return this._id}},{key:"setUserInfo",value:function(t){this._profileName.textContent=t.name,this._profileProfession.textContent=t.about,this._profileAvatar.style.backgroundImage="url(".concat(t.avatar,")"),this._id=t._id}},{key:"setUserAvatar",value:function(t){this._profileAvatar.style.backgroundImage="url(".concat(t.avatar,")")}}])&&b(e.prototype,n),t}();function k(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var E=function(){function t(e,n){var r,o,i=this,a=e.renderer;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),o=function(t){var e=i._renderer(t);i._container.prepend(e)},(r="addItem")in this?Object.defineProperty(this,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):this[r]=o,this._renderer=a,this._container=n}var e,n;return e=t,(n=[{key:"renderItems",value:function(t){t.forEach(this.addItem)}}])&&k(e.prototype,n),t}();function w(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function S(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var L=function(){function t(e){var n=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),S(this,"_handleEscUp",(function(t){t.preventDefault(),"Escape"===t.key&&n.close()})),S(this,"_handleClick",(function(t){(t.target.classList.contains("modal")||t.target.classList.contains("modal__close-button"))&&n.close()})),this._popupElement=document.querySelector(".".concat(e)),this._handleEscUp=this._handleEscUp.bind(this)}var e,n;return e=t,(n=[{key:"open",value:function(){this._popupElement.classList.add("modal_open"),document.addEventListener("keyup",this._handleEscUp),this.setEventListeners()}},{key:"close",value:function(){this._popupElement.classList.remove("modal_open"),document.removeEventListener("keyup",this._handleEscUp),this._popupElement.removeEventListener("click",this._handleClick)}},{key:"setEventListeners",value:function(){this._popupElement.addEventListener("click",this._handleClick)}}])&&w(e.prototype,n),t}();function C(t){return(C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function O(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function j(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function B(t,e,n){return(B="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=P(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function x(t,e){return(x=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function I(t,e){return!e||"object"!==C(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function P(t){return(P=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var T=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&x(t,e)}(a,t);var e,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=P(r);if(o){var n=P(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return I(this,t)});function a(){return O(this,a),i.apply(this,arguments)}return e=a,(n=[{key:"open",value:function(t){var e=t.link,n=t.name;this._popupElement.querySelector(".modal__caption").textContent=n;var r=this._popupElement.querySelector(".modal__image");r.src=e,r.alt="".concat(n),B(P(a.prototype),"open",this).call(this)}}])&&j(e.prototype,n),a}(L);function R(t){return(R="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function q(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function U(t,e,n){return(U="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=N(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function D(t,e){return(D=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function A(t,e){return!e||"object"!==R(e)&&"function"!=typeof e?F(t):e}function F(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function N(t){return(N=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var V=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&D(t,e)}(a,t);var e,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=N(r);if(o){var n=N(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return A(this,t)});function a(t,e){var n,r,o,u;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),u=function(t){t.preventDefault(),n.toggleSaveButton(),n._handleFormSubmit(n._getInputValues())},(o="_handleSubmit")in(r=F(n=i.call(this,t)))?Object.defineProperty(r,o,{value:u,enumerable:!0,configurable:!0,writable:!0}):r[o]=u,n._handleFormSubmit=e,n._popupForm=n._popupElement.querySelector(".modal__form"),n}return e=a,(n=[{key:"_getInputValues",value:function(){var t={};return this._inputElements=Array.from(this._popupForm.elements),this._inputElements.forEach((function(e){t[e.name]=e.value})),t}},{key:"close",value:function(){this._popupForm.reset(),this._popupForm.removeEventListener("submit",this._submitHandler),U(N(a.prototype),"close",this).call(this)}},{key:"setEventListeners",value:function(){this._popupForm.addEventListener("submit",this._handleSubmit),U(N(a.prototype),"setEventListeners",this).call(this)}},{key:"toggleSaveButton",value:function(){var t=this._popupForm.querySelector(".modal__save-button");t.textContent===t.id?t.textContent="Saving...":t.textContent=t.id}}])&&q(e.prototype,n),a}(L);function z(t){return(z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function G(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function H(t,e,n){return(H="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=$(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function J(t,e){return(J=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function M(t,e){return!e||"object"!==z(e)&&"function"!=typeof e?Y(t):e}function Y(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function $(t){return($=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var K=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&J(t,e)}(a,t);var e,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=$(r);if(o){var n=$(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return M(this,t)});function a(t,e){var n,r,o,u;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),u=function(t){t.preventDefault(),n._popupForm.querySelector(".modal__save-button").textContent="Saving...",n._handleFormSubmit(n._cardId,n._cardElement)},(o="_handleSubmit")in(r=Y(n=i.call(this,t,e)))?Object.defineProperty(r,o,{value:u,enumerable:!0,configurable:!0,writable:!0}):r[o]=u,n}return e=a,(n=[{key:"open",value:function(t,e){this._cardId=t,this._cardElement=e,H($(a.prototype),"open",this).call(this)}}])&&G(e.prototype,n),a}(V);function Q(t){return function(t){if(Array.isArray(t))return W(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return W(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?W(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function W(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function X(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var Z=function(){function t(e,n){var r,o,i=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),o=function(t){i._form.querySelector("#"+t.id+"-error").textContent=t.validationMessage,t.classList.add(i._activeInputErrorClass)},(r="_showInputError")in this?Object.defineProperty(this,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):this[r]=o,this._inputSelector=e._inputSelector,this._submitButtonSelector=e._submitButtonSelector,this._inputErrorClass=e._inputErrorClass,this._activeInputErrorClass=e._activeInputErrorClass,this._inactiveButtonClass=e._inactiveButtonClass,this._form=n}var e,n;return e=t,(n=[{key:"_hasValidInputs",value:function(){if(this._inputElements.every((function(t){return t.validity.valid})))return!0}},{key:"_toggleButton",value:function(){this._hasValidInputs()?(this._submitButtonEl.disabled=!1,this._submitButtonEl.classList.remove(this._inactiveButtonClass)):(this._submitButtonEl.disabled=!0,this._submitButtonEl.classList.add(this._inactiveButtonClass))}},{key:"_hideInputError",value:function(t){this._form.querySelector("#"+t.id+"-error").textContent="",t.classList.remove(this._activeInputErrorClass)}},{key:"_checkInputValidity",value:function(t){t.validity.valid?this._hideInputError(t):this._showInputError(t)}},{key:"_setEventListeners",value:function(){var t=this;this._inputElements=Array.from(this._form.querySelectorAll(this._inputSelector)),this._submitButtonEl=this._form.querySelector(this._submitButtonSelector),this._inputElements.forEach((function(e){e.addEventListener("input",(function(){t._checkInputValidity(e),t._toggleButton()}))}))}},{key:"enableValidation",value:function(){this._form.addEventListener("submit",(function(t){return t.preventDefault()})),this._setEventListeners()}},{key:"removeValidationErrors",value:function(){var t=this;Q(this._form.querySelectorAll(this._inputSelector)).forEach((function(e){e.classList.remove(t._activeInputErrorClass)})),Q(this._form.querySelectorAll(this._inputErrorClass)).forEach((function(t){t.textContent=""}))}},{key:"disableSubmitButton",value:function(){var t=this;Q(this._form.querySelectorAll(this._submitButtonSelector)).forEach((function(e){e.disabled=!0,e.classList.add(t._inactiveButtonClass)}))}}])&&X(e.prototype,n),t}();function tt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var et=function(){function t(e){var n=e.data,r=e.currentUserId,o=e.handleCardClick,i=e.handleLikeButton,a=e.handleDeleteButton,u=e.cardSelector;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._name=n.name,this._link=n.link,this._id=n._id,this._likes=n.likes,this._ownerId=n.owner._id,this._userId=r,this._handleCardClick=o,this._handleLikeButton=i,this._handleDeleteButton=a,this._cardSelector=u}var e,n;return e=t,(n=[{key:"_renderDeleteButton",value:function(){this._ownerId===this._userId?(this._cardDeleteButton.classList.add("card__delete-button_active"),this._cardDeleteButton.disabled=!1):(this._cardDeleteButton.classList.remove("card__delete-button_active"),this._cardDeleteButton.disabled=!0)}},{key:"_setEventListeners",value:function(){var t=this;this._cardLikeButton=this._element.querySelector(".card__like-button"),this._cardDeleteButton=this._element.querySelector(".card__delete-button"),this._image.addEventListener("click",(function(){return t._handleCardClick()})),this._cardLikeButton.addEventListener("click",(function(){return t._handleLikeButton()})),this._cardDeleteButton.addEventListener("click",(function(){return t._handleDeleteButton()}))}},{key:"_renderLikes",value:function(){var t=this;this._cardLikesCounter=this._element.querySelector(".card__like-counter"),this._cardLikesCounter.textContent=this._likes.length,this._likes.some((function(e){return e._id===t._userId}))?this._cardLikeButton.classList.add("card__like-button_active"):this._cardLikeButton.classList.remove("card__like-button_active")}},{key:"updateLikes",value:function(t){this._likes=t.likes,this._renderLikes()}},{key:"_getTemplate",value:function(){return document.querySelector(this._cardSelector).content.querySelector(".card").cloneNode(!0)}},{key:"generateCard",value:function(){return this._element=this._getTemplate(),this._element.querySelector(".card__title").textContent=this._name,this._image=this._element.querySelector(".card__image"),this._image.style.backgroundImage="url(".concat(this._link,")"),this._setEventListeners(),this._renderDeleteButton(),this._renderLikes(),this._element}}])&&tt(e.prototype,n),t}(),nt=new m({baseUrl:"https://around.nomoreparties.co/v1/group-13",authToken:"487d57fd-0c04-4caf-a7fc-6016fd47c784"});h.src=y,p.src=_;var rt=new g(".profile__name",".profile__profession",d);nt.getUserInfo().then((function(t){rt.setUserInfo(t)})).catch((function(t){return console.log("Error: ".concat(t))}));var ot=new T("modal_type_image-preview"),it=new K("modal_type_delete",(function(t,e){nt.deleteCard(t).then((function(){return e.remove()})).then((function(){return it.close()})).catch((function(t){return console.log("Error: ".concat(t))})).finally((function(){return it.toggleSaveButton()}))})),at=new E({renderer:function(t){return e={data:t,currentUserId:rt.getId(),handleCardClick:function(){ot.open(this._link,this._name),s.src=this._link,s.alt=this._name,f.textContent=this._name},handleLikeButton:function(){var t=this;this._cardLikeButton.classList.contains("card__like-button_active")?nt.deleteLike(this._id).then((function(e){return t.updateLikes(e)})).catch((function(t){return console.log("Error: ".concat(t))})):nt.addLike(this._id).then((function(e){return t.updateLikes(e)})).catch((function(t){return console.log("Error: ".concat(t))}))},handleDeleteButton:function(){it.open(t._id,this._element)},cardSelector:".card__template"},new et({data:e.data,currentUserId:e.currentUserId,handleCardClick:e.handleCardClick,handleLikeButton:e.handleLikeButton,handleDeleteButton:e.handleDeleteButton,cardSelector:e.cardSelector}).generateCard();var e}},o);nt.getCards().then((function(t){at.renderItems(t)})).catch((function(t){return console.log("Error: ".concat(t))}));var ut=new V("modal_type_edit",(function(t){nt.editUserInfo(t).then((function(t){rt.setUserInfo(t),ut.close()})).catch((function(t){return console.log("Error: ".concat(t))})).finally((function(){return ut.toggleSaveButton()}))})),ct=new V("modal_type_edit-avatar",(function(t){nt.editUserAvatar(t).then((function(t){rt.setUserAvatar(t),ct.close()})).catch((function(t){return console.log("Error: ".concat(t))})).finally((function(){return ct.toggleSaveButton()}))})),lt=new V("modal_type_add",(function(t){nt.addCard(t).then((function(t){at.addItem(t),lt.close()})).catch((function(t){return console.log("Error: ".concat(t))})).finally((function(){return lt.toggleSaveButton()}))}));i.addEventListener("click",(function(){ut.open(),ut.setEventListeners(),st.removeValidationErrors(),st.disableSubmitButton();var t=rt.getUserInfo();u.value=t.name,c.value=t.profession})),d.addEventListener("click",(function(){ct.open(),ct.setEventListeners(),ht.removeValidationErrors(),ht.disableSubmitButton()})),a.addEventListener("click",(function(){lt.open(),lt.setEventListeners(),ft.removeValidationErrors(),ft.disableSubmitButton()}));var st=new Z(l,t),ft=new Z(l,r),ht=new Z(l,e);st.enableValidation(),ft.enableValidation(),ht.enableValidation()})()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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bnRpbWUvcnVudGltZS5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80L3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvd2VicGFjay9ydW50aW1lL25vZGUgbW9kdWxlIGRlY29yYXRvciIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80L3dlYnBhY2svcnVudGltZS9wdWJsaWNQYXRoIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvdXRpbHMvY29uc3RhbnRzLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvY29tcG9uZW50cy9hcGkuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9jb21wb25lbnRzL3VzZXItaW5mby5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL2NvbXBvbmVudHMvc2VjdGlvbi5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL2NvbXBvbmVudHMvcG9wdXAuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9jb21wb25lbnRzL3BvcHVwLXdpdGgtaW1hZ2UuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9jb21wb25lbnRzL3BvcHVwLXdpdGgtZm9ybS5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL2NvbXBvbmVudHMvcG9wdXAtd2l0aC12ZXJpZmljYXRpb24uanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9jb21wb25lbnRzL2Zvcm0tdmFsaWRhdG9yLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvY29tcG9uZW50cy9jYXJkLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvcGFnZXMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy91dGlscy91dGlscy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIENvcHlyaWdodCAoYykgMjAxNC1wcmVzZW50LCBGYWNlYm9vaywgSW5jLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLlxuICovXG5cbnZhciBydW50aW1lID0gKGZ1bmN0aW9uIChleHBvcnRzKSB7XG4gIFwidXNlIHN0cmljdFwiO1xuXG4gIHZhciBPcCA9IE9iamVjdC5wcm90b3R5cGU7XG4gIHZhciBoYXNPd24gPSBPcC5oYXNPd25Qcm9wZXJ0eTtcbiAgdmFyIHVuZGVmaW5lZDsgLy8gTW9yZSBjb21wcmVzc2libGUgdGhhbiB2b2lkIDAuXG4gIHZhciAkU3ltYm9sID0gdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiID8gU3ltYm9sIDoge307XG4gIHZhciBpdGVyYXRvclN5bWJvbCA9ICRTeW1ib2wuaXRlcmF0b3IgfHwgXCJAQGl0ZXJhdG9yXCI7XG4gIHZhciBhc3luY0l0ZXJhdG9yU3ltYm9sID0gJFN5bWJvbC5hc3luY0l0ZXJhdG9yIHx8IFwiQEBhc3luY0l0ZXJhdG9yXCI7XG4gIHZhciB0b1N0cmluZ1RhZ1N5bWJvbCA9ICRTeW1ib2wudG9TdHJpbmdUYWcgfHwgXCJAQHRvU3RyaW5nVGFnXCI7XG5cbiAgZnVuY3Rpb24gZGVmaW5lKG9iaiwga2V5LCB2YWx1ZSkge1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwge1xuICAgICAgdmFsdWU6IHZhbHVlLFxuICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgIHdyaXRhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgcmV0dXJuIG9ialtrZXldO1xuICB9XG4gIHRyeSB7XG4gICAgLy8gSUUgOCBoYXMgYSBicm9rZW4gT2JqZWN0LmRlZmluZVByb3BlcnR5IHRoYXQgb25seSB3b3JrcyBvbiBET00gb2JqZWN0cy5cbiAgICBkZWZpbmUoe30sIFwiXCIpO1xuICB9IGNhdGNoIChlcnIpIHtcbiAgICBkZWZpbmUgPSBmdW5jdGlvbihvYmosIGtleSwgdmFsdWUpIHtcbiAgICAgIHJldHVybiBvYmpba2V5XSA9IHZhbHVlO1xuICAgIH07XG4gIH1cblxuICBmdW5jdGlvbiB3cmFwKGlubmVyRm4sIG91dGVyRm4sIHNlbGYsIHRyeUxvY3NMaXN0KSB7XG4gICAgLy8gSWYgb3V0ZXJGbiBwcm92aWRlZCBhbmQgb3V0ZXJGbi5wcm90b3R5cGUgaXMgYSBHZW5lcmF0b3IsIHRoZW4gb3V0ZXJGbi5wcm90b3R5cGUgaW5zdGFuY2VvZiBHZW5lcmF0b3IuXG4gICAgdmFyIHByb3RvR2VuZXJhdG9yID0gb3V0ZXJGbiAmJiBvdXRlckZuLnByb3RvdHlwZSBpbnN0YW5jZW9mIEdlbmVyYXRvciA/IG91dGVyRm4gOiBHZW5lcmF0b3I7XG4gICAgdmFyIGdlbmVyYXRvciA9IE9iamVjdC5jcmVhdGUocHJvdG9HZW5lcmF0b3IucHJvdG90eXBlKTtcbiAgICB2YXIgY29udGV4dCA9IG5ldyBDb250ZXh0KHRyeUxvY3NMaXN0IHx8IFtdKTtcblxuICAgIC8vIFRoZSAuX2ludm9rZSBtZXRob2QgdW5pZmllcyB0aGUgaW1wbGVtZW50YXRpb25zIG9mIHRoZSAubmV4dCxcbiAgICAvLyAudGhyb3csIGFuZCAucmV0dXJuIG1ldGhvZHMuXG4gICAgZ2VuZXJhdG9yLl9pbnZva2UgPSBtYWtlSW52b2tlTWV0aG9kKGlubmVyRm4sIHNlbGYsIGNvbnRleHQpO1xuXG4gICAgcmV0dXJuIGdlbmVyYXRvcjtcbiAgfVxuICBleHBvcnRzLndyYXAgPSB3cmFwO1xuXG4gIC8vIFRyeS9jYXRjaCBoZWxwZXIgdG8gbWluaW1pemUgZGVvcHRpbWl6YXRpb25zLiBSZXR1cm5zIGEgY29tcGxldGlvblxuICAvLyByZWNvcmQgbGlrZSBjb250ZXh0LnRyeUVudHJpZXNbaV0uY29tcGxldGlvbi4gVGhpcyBpbnRlcmZhY2UgY291bGRcbiAgLy8gaGF2ZSBiZWVuIChhbmQgd2FzIHByZXZpb3VzbHkpIGRlc2lnbmVkIHRvIHRha2UgYSBjbG9zdXJlIHRvIGJlXG4gIC8vIGludm9rZWQgd2l0aG91dCBhcmd1bWVudHMsIGJ1dCBpbiBhbGwgdGhlIGNhc2VzIHdlIGNhcmUgYWJvdXQgd2VcbiAgLy8gYWxyZWFkeSBoYXZlIGFuIGV4aXN0aW5nIG1ldGhvZCB3ZSB3YW50IHRvIGNhbGwsIHNvIHRoZXJlJ3Mgbm8gbmVlZFxuICAvLyB0byBjcmVhdGUgYSBuZXcgZnVuY3Rpb24gb2JqZWN0LiBXZSBjYW4gZXZlbiBnZXQgYXdheSB3aXRoIGFzc3VtaW5nXG4gIC8vIHRoZSBtZXRob2QgdGFrZXMgZXhhY3RseSBvbmUgYXJndW1lbnQsIHNpbmNlIHRoYXQgaGFwcGVucyB0byBiZSB0cnVlXG4gIC8vIGluIGV2ZXJ5IGNhc2UsIHNvIHdlIGRvbid0IGhhdmUgdG8gdG91Y2ggdGhlIGFyZ3VtZW50cyBvYmplY3QuIFRoZVxuICAvLyBvbmx5IGFkZGl0aW9uYWwgYWxsb2NhdGlvbiByZXF1aXJlZCBpcyB0aGUgY29tcGxldGlvbiByZWNvcmQsIHdoaWNoXG4gIC8vIGhhcyBhIHN0YWJsZSBzaGFwZSBhbmQgc28gaG9wZWZ1bGx5IHNob3VsZCBiZSBjaGVhcCB0byBhbGxvY2F0ZS5cbiAgZnVuY3Rpb24gdHJ5Q2F0Y2goZm4sIG9iaiwgYXJnKSB7XG4gICAgdHJ5IHtcbiAgICAgIHJldHVybiB7IHR5cGU6IFwibm9ybWFsXCIsIGFyZzogZm4uY2FsbChvYmosIGFyZykgfTtcbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgIHJldHVybiB7IHR5cGU6IFwidGhyb3dcIiwgYXJnOiBlcnIgfTtcbiAgICB9XG4gIH1cblxuICB2YXIgR2VuU3RhdGVTdXNwZW5kZWRTdGFydCA9IFwic3VzcGVuZGVkU3RhcnRcIjtcbiAgdmFyIEdlblN0YXRlU3VzcGVuZGVkWWllbGQgPSBcInN1c3BlbmRlZFlpZWxkXCI7XG4gIHZhciBHZW5TdGF0ZUV4ZWN1dGluZyA9IFwiZXhlY3V0aW5nXCI7XG4gIHZhciBHZW5TdGF0ZUNvbXBsZXRlZCA9IFwiY29tcGxldGVkXCI7XG5cbiAgLy8gUmV0dXJuaW5nIHRoaXMgb2JqZWN0IGZyb20gdGhlIGlubmVyRm4gaGFzIHRoZSBzYW1lIGVmZmVjdCBhc1xuICAvLyBicmVha2luZyBvdXQgb2YgdGhlIGRpc3BhdGNoIHN3aXRjaCBzdGF0ZW1lbnQuXG4gIHZhciBDb250aW51ZVNlbnRpbmVsID0ge307XG5cbiAgLy8gRHVtbXkgY29uc3RydWN0b3IgZnVuY3Rpb25zIHRoYXQgd2UgdXNlIGFzIHRoZSAuY29uc3RydWN0b3IgYW5kXG4gIC8vIC5jb25zdHJ1Y3Rvci5wcm90b3R5cGUgcHJvcGVydGllcyBmb3IgZnVuY3Rpb25zIHRoYXQgcmV0dXJuIEdlbmVyYXRvclxuICAvLyBvYmplY3RzLiBGb3IgZnVsbCBzcGVjIGNvbXBsaWFuY2UsIHlvdSBtYXkgd2lzaCB0byBjb25maWd1cmUgeW91clxuICAvLyBtaW5pZmllciBub3QgdG8gbWFuZ2xlIHRoZSBuYW1lcyBvZiB0aGVzZSB0d28gZnVuY3Rpb25zLlxuICBmdW5jdGlvbiBHZW5lcmF0b3IoKSB7fVxuICBmdW5jdGlvbiBHZW5lcmF0b3JGdW5jdGlvbigpIHt9XG4gIGZ1bmN0aW9uIEdlbmVyYXRvckZ1bmN0aW9uUHJvdG90eXBlKCkge31cblxuICAvLyBUaGlzIGlzIGEgcG9seWZpbGwgZm9yICVJdGVyYXRvclByb3RvdHlwZSUgZm9yIGVudmlyb25tZW50cyB0aGF0XG4gIC8vIGRvbid0IG5hdGl2ZWx5IHN1cHBvcnQgaXQuXG4gIHZhciBJdGVyYXRvclByb3RvdHlwZSA9IHt9O1xuICBkZWZpbmUoSXRlcmF0b3JQcm90b3R5cGUsIGl0ZXJhdG9yU3ltYm9sLCBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH0pO1xuXG4gIHZhciBnZXRQcm90byA9IE9iamVjdC5nZXRQcm90b3R5cGVPZjtcbiAgdmFyIE5hdGl2ZUl0ZXJhdG9yUHJvdG90eXBlID0gZ2V0UHJvdG8gJiYgZ2V0UHJvdG8oZ2V0UHJvdG8odmFsdWVzKFtdKSkpO1xuICBpZiAoTmF0aXZlSXRlcmF0b3JQcm90b3R5cGUgJiZcbiAgICAgIE5hdGl2ZUl0ZXJhdG9yUHJvdG90eXBlICE9PSBPcCAmJlxuICAgICAgaGFzT3duLmNhbGwoTmF0aXZlSXRlcmF0b3JQcm90b3R5cGUsIGl0ZXJhdG9yU3ltYm9sKSkge1xuICAgIC8vIFRoaXMgZW52aXJvbm1lbnQgaGFzIGEgbmF0aXZlICVJdGVyYXRvclByb3RvdHlwZSU7IHVzZSBpdCBpbnN0ZWFkXG4gICAgLy8gb2YgdGhlIHBvbHlmaWxsLlxuICAgIEl0ZXJhdG9yUHJvdG90eXBlID0gTmF0aXZlSXRlcmF0b3JQcm90b3R5cGU7XG4gIH1cblxuICB2YXIgR3AgPSBHZW5lcmF0b3JGdW5jdGlvblByb3RvdHlwZS5wcm90b3R5cGUgPVxuICAgIEdlbmVyYXRvci5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKEl0ZXJhdG9yUHJvdG90eXBlKTtcbiAgR2VuZXJhdG9yRnVuY3Rpb24ucHJvdG90eXBlID0gR2VuZXJhdG9yRnVuY3Rpb25Qcm90b3R5cGU7XG4gIGRlZmluZShHcCwgXCJjb25zdHJ1Y3RvclwiLCBHZW5lcmF0b3JGdW5jdGlvblByb3RvdHlwZSk7XG4gIGRlZmluZShHZW5lcmF0b3JGdW5jdGlvblByb3RvdHlwZSwgXCJjb25zdHJ1Y3RvclwiLCBHZW5lcmF0b3JGdW5jdGlvbik7XG4gIEdlbmVyYXRvckZ1bmN0aW9uLmRpc3BsYXlOYW1lID0gZGVmaW5lKFxuICAgIEdlbmVyYXRvckZ1bmN0aW9uUHJvdG90eXBlLFxuICAgIHRvU3RyaW5nVGFnU3ltYm9sLFxuICAgIFwiR2VuZXJhdG9yRnVuY3Rpb25cIlxuICApO1xuXG4gIC8vIEhlbHBlciBmb3IgZGVmaW5pbmcgdGhlIC5uZXh0LCAudGhyb3csIGFuZCAucmV0dXJuIG1ldGhvZHMgb2YgdGhlXG4gIC8vIEl0ZXJhdG9yIGludGVyZmFjZSBpbiB0ZXJtcyBvZiBhIHNpbmdsZSAuX2ludm9rZSBtZXRob2QuXG4gIGZ1bmN0aW9uIGRlZmluZUl0ZXJhdG9yTWV0aG9kcyhwcm90b3R5cGUpIHtcbiAgICBbXCJuZXh0XCIsIFwidGhyb3dcIiwgXCJyZXR1cm5cIl0uZm9yRWFjaChmdW5jdGlvbihtZXRob2QpIHtcbiAgICAgIGRlZmluZShwcm90b3R5cGUsIG1ldGhvZCwgZnVuY3Rpb24oYXJnKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9pbnZva2UobWV0aG9kLCBhcmcpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH1cblxuICBleHBvcnRzLmlzR2VuZXJhdG9yRnVuY3Rpb24gPSBmdW5jdGlvbihnZW5GdW4pIHtcbiAgICB2YXIgY3RvciA9IHR5cGVvZiBnZW5GdW4gPT09IFwiZnVuY3Rpb25cIiAmJiBnZW5GdW4uY29uc3RydWN0b3I7XG4gICAgcmV0dXJuIGN0b3JcbiAgICAgID8gY3RvciA9PT0gR2VuZXJhdG9yRnVuY3Rpb24gfHxcbiAgICAgICAgLy8gRm9yIHRoZSBuYXRpdmUgR2VuZXJhdG9yRnVuY3Rpb24gY29uc3RydWN0b3IsIHRoZSBiZXN0IHdlIGNhblxuICAgICAgICAvLyBkbyBpcyB0byBjaGVjayBpdHMgLm5hbWUgcHJvcGVydHkuXG4gICAgICAgIChjdG9yLmRpc3BsYXlOYW1lIHx8IGN0b3IubmFtZSkgPT09IFwiR2VuZXJhdG9yRnVuY3Rpb25cIlxuICAgICAgOiBmYWxzZTtcbiAgfTtcblxuICBleHBvcnRzLm1hcmsgPSBmdW5jdGlvbihnZW5GdW4pIHtcbiAgICBpZiAoT2JqZWN0LnNldFByb3RvdHlwZU9mKSB7XG4gICAgICBPYmplY3Quc2V0UHJvdG90eXBlT2YoZ2VuRnVuLCBHZW5lcmF0b3JGdW5jdGlvblByb3RvdHlwZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGdlbkZ1bi5fX3Byb3RvX18gPSBHZW5lcmF0b3JGdW5jdGlvblByb3RvdHlwZTtcbiAgICAgIGRlZmluZShnZW5GdW4sIHRvU3RyaW5nVGFnU3ltYm9sLCBcIkdlbmVyYXRvckZ1bmN0aW9uXCIpO1xuICAgIH1cbiAgICBnZW5GdW4ucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShHcCk7XG4gICAgcmV0dXJuIGdlbkZ1bjtcbiAgfTtcblxuICAvLyBXaXRoaW4gdGhlIGJvZHkgb2YgYW55IGFzeW5jIGZ1bmN0aW9uLCBgYXdhaXQgeGAgaXMgdHJhbnNmb3JtZWQgdG9cbiAgLy8gYHlpZWxkIHJlZ2VuZXJhdG9yUnVudGltZS5hd3JhcCh4KWAsIHNvIHRoYXQgdGhlIHJ1bnRpbWUgY2FuIHRlc3RcbiAgLy8gYGhhc093bi5jYWxsKHZhbHVlLCBcIl9fYXdhaXRcIilgIHRvIGRldGVybWluZSBpZiB0aGUgeWllbGRlZCB2YWx1ZSBpc1xuICAvLyBtZWFudCB0byBiZSBhd2FpdGVkLlxuICBleHBvcnRzLmF3cmFwID0gZnVuY3Rpb24oYXJnKSB7XG4gICAgcmV0dXJuIHsgX19hd2FpdDogYXJnIH07XG4gIH07XG5cbiAgZnVuY3Rpb24gQXN5bmNJdGVyYXRvcihnZW5lcmF0b3IsIFByb21pc2VJbXBsKSB7XG4gICAgZnVuY3Rpb24gaW52b2tlKG1ldGhvZCwgYXJnLCByZXNvbHZlLCByZWplY3QpIHtcbiAgICAgIHZhciByZWNvcmQgPSB0cnlDYXRjaChnZW5lcmF0b3JbbWV0aG9kXSwgZ2VuZXJhdG9yLCBhcmcpO1xuICAgICAgaWYgKHJlY29yZC50eXBlID09PSBcInRocm93XCIpIHtcbiAgICAgICAgcmVqZWN0KHJlY29yZC5hcmcpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdmFyIHJlc3VsdCA9IHJlY29yZC5hcmc7XG4gICAgICAgIHZhciB2YWx1ZSA9IHJlc3VsdC52YWx1ZTtcbiAgICAgICAgaWYgKHZhbHVlICYmXG4gICAgICAgICAgICB0eXBlb2YgdmFsdWUgPT09IFwib2JqZWN0XCIgJiZcbiAgICAgICAgICAgIGhhc093bi5jYWxsKHZhbHVlLCBcIl9fYXdhaXRcIikpIHtcbiAgICAgICAgICByZXR1cm4gUHJvbWlzZUltcGwucmVzb2x2ZSh2YWx1ZS5fX2F3YWl0KS50aGVuKGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICAgICAgICBpbnZva2UoXCJuZXh0XCIsIHZhbHVlLCByZXNvbHZlLCByZWplY3QpO1xuICAgICAgICAgIH0sIGZ1bmN0aW9uKGVycikge1xuICAgICAgICAgICAgaW52b2tlKFwidGhyb3dcIiwgZXJyLCByZXNvbHZlLCByZWplY3QpO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIFByb21pc2VJbXBsLnJlc29sdmUodmFsdWUpLnRoZW4oZnVuY3Rpb24odW53cmFwcGVkKSB7XG4gICAgICAgICAgLy8gV2hlbiBhIHlpZWxkZWQgUHJvbWlzZSBpcyByZXNvbHZlZCwgaXRzIGZpbmFsIHZhbHVlIGJlY29tZXNcbiAgICAgICAgICAvLyB0aGUgLnZhbHVlIG9mIHRoZSBQcm9taXNlPHt2YWx1ZSxkb25lfT4gcmVzdWx0IGZvciB0aGVcbiAgICAgICAgICAvLyBjdXJyZW50IGl0ZXJhdGlvbi5cbiAgICAgICAgICByZXN1bHQudmFsdWUgPSB1bndyYXBwZWQ7XG4gICAgICAgICAgcmVzb2x2ZShyZXN1bHQpO1xuICAgICAgICB9LCBmdW5jdGlvbihlcnJvcikge1xuICAgICAgICAgIC8vIElmIGEgcmVqZWN0ZWQgUHJvbWlzZSB3YXMgeWllbGRlZCwgdGhyb3cgdGhlIHJlamVjdGlvbiBiYWNrXG4gICAgICAgICAgLy8gaW50byB0aGUgYXN5bmMgZ2VuZXJhdG9yIGZ1bmN0aW9uIHNvIGl0IGNhbiBiZSBoYW5kbGVkIHRoZXJlLlxuICAgICAgICAgIHJldHVybiBpbnZva2UoXCJ0aHJvd1wiLCBlcnJvciwgcmVzb2x2ZSwgcmVqZWN0KTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgdmFyIHByZXZpb3VzUHJvbWlzZTtcblxuICAgIGZ1bmN0aW9uIGVucXVldWUobWV0aG9kLCBhcmcpIHtcbiAgICAgIGZ1bmN0aW9uIGNhbGxJbnZva2VXaXRoTWV0aG9kQW5kQXJnKCkge1xuICAgICAgICByZXR1cm4gbmV3IFByb21pc2VJbXBsKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICAgIGludm9rZShtZXRob2QsIGFyZywgcmVzb2x2ZSwgcmVqZWN0KTtcbiAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBwcmV2aW91c1Byb21pc2UgPVxuICAgICAgICAvLyBJZiBlbnF1ZXVlIGhhcyBiZWVuIGNhbGxlZCBiZWZvcmUsIHRoZW4gd2Ugd2FudCB0byB3YWl0IHVudGlsXG4gICAgICAgIC8vIGFsbCBwcmV2aW91cyBQcm9taXNlcyBoYXZlIGJlZW4gcmVzb2x2ZWQgYmVmb3JlIGNhbGxpbmcgaW52b2tlLFxuICAgICAgICAvLyBzbyB0aGF0IHJlc3VsdHMgYXJlIGFsd2F5cyBkZWxpdmVyZWQgaW4gdGhlIGNvcnJlY3Qgb3JkZXIuIElmXG4gICAgICAgIC8vIGVucXVldWUgaGFzIG5vdCBiZWVuIGNhbGxlZCBiZWZvcmUsIHRoZW4gaXQgaXMgaW1wb3J0YW50IHRvXG4gICAgICAgIC8vIGNhbGwgaW52b2tlIGltbWVkaWF0ZWx5LCB3aXRob3V0IHdhaXRpbmcgb24gYSBjYWxsYmFjayB0byBmaXJlLFxuICAgICAgICAvLyBzbyB0aGF0IHRoZSBhc3luYyBnZW5lcmF0b3IgZnVuY3Rpb24gaGFzIHRoZSBvcHBvcnR1bml0eSB0byBkb1xuICAgICAgICAvLyBhbnkgbmVjZXNzYXJ5IHNldHVwIGluIGEgcHJlZGljdGFibGUgd2F5LiBUaGlzIHByZWRpY3RhYmlsaXR5XG4gICAgICAgIC8vIGlzIHdoeSB0aGUgUHJvbWlzZSBjb25zdHJ1Y3RvciBzeW5jaHJvbm91c2x5IGludm9rZXMgaXRzXG4gICAgICAgIC8vIGV4ZWN1dG9yIGNhbGxiYWNrLCBhbmQgd2h5IGFzeW5jIGZ1bmN0aW9ucyBzeW5jaHJvbm91c2x5XG4gICAgICAgIC8vIGV4ZWN1dGUgY29kZSBiZWZvcmUgdGhlIGZpcnN0IGF3YWl0LiBTaW5jZSB3ZSBpbXBsZW1lbnQgc2ltcGxlXG4gICAgICAgIC8vIGFzeW5jIGZ1bmN0aW9ucyBpbiB0ZXJtcyBvZiBhc3luYyBnZW5lcmF0b3JzLCBpdCBpcyBlc3BlY2lhbGx5XG4gICAgICAgIC8vIGltcG9ydGFudCB0byBnZXQgdGhpcyByaWdodCwgZXZlbiB0aG91Z2ggaXQgcmVxdWlyZXMgY2FyZS5cbiAgICAgICAgcHJldmlvdXNQcm9taXNlID8gcHJldmlvdXNQcm9taXNlLnRoZW4oXG4gICAgICAgICAgY2FsbEludm9rZVdpdGhNZXRob2RBbmRBcmcsXG4gICAgICAgICAgLy8gQXZvaWQgcHJvcGFnYXRpbmcgZmFpbHVyZXMgdG8gUHJvbWlzZXMgcmV0dXJuZWQgYnkgbGF0ZXJcbiAgICAgICAgICAvLyBpbnZvY2F0aW9ucyBvZiB0aGUgaXRlcmF0b3IuXG4gICAgICAgICAgY2FsbEludm9rZVdpdGhNZXRob2RBbmRBcmdcbiAgICAgICAgKSA6IGNhbGxJbnZva2VXaXRoTWV0aG9kQW5kQXJnKCk7XG4gICAgfVxuXG4gICAgLy8gRGVmaW5lIHRoZSB1bmlmaWVkIGhlbHBlciBtZXRob2QgdGhhdCBpcyB1c2VkIHRvIGltcGxlbWVudCAubmV4dCxcbiAgICAvLyAudGhyb3csIGFuZCAucmV0dXJuIChzZWUgZGVmaW5lSXRlcmF0b3JNZXRob2RzKS5cbiAgICB0aGlzLl9pbnZva2UgPSBlbnF1ZXVlO1xuICB9XG5cbiAgZGVmaW5lSXRlcmF0b3JNZXRob2RzKEFzeW5jSXRlcmF0b3IucHJvdG90eXBlKTtcbiAgZGVmaW5lKEFzeW5jSXRlcmF0b3IucHJvdG90eXBlLCBhc3luY0l0ZXJhdG9yU3ltYm9sLCBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH0pO1xuICBleHBvcnRzLkFzeW5jSXRlcmF0b3IgPSBBc3luY0l0ZXJhdG9yO1xuXG4gIC8vIE5vdGUgdGhhdCBzaW1wbGUgYXN5bmMgZnVuY3Rpb25zIGFyZSBpbXBsZW1lbnRlZCBvbiB0b3Agb2ZcbiAgLy8gQXN5bmNJdGVyYXRvciBvYmplY3RzOyB0aGV5IGp1c3QgcmV0dXJuIGEgUHJvbWlzZSBmb3IgdGhlIHZhbHVlIG9mXG4gIC8vIHRoZSBmaW5hbCByZXN1bHQgcHJvZHVjZWQgYnkgdGhlIGl0ZXJhdG9yLlxuICBleHBvcnRzLmFzeW5jID0gZnVuY3Rpb24oaW5uZXJGbiwgb3V0ZXJGbiwgc2VsZiwgdHJ5TG9jc0xpc3QsIFByb21pc2VJbXBsKSB7XG4gICAgaWYgKFByb21pc2VJbXBsID09PSB2b2lkIDApIFByb21pc2VJbXBsID0gUHJvbWlzZTtcblxuICAgIHZhciBpdGVyID0gbmV3IEFzeW5jSXRlcmF0b3IoXG4gICAgICB3cmFwKGlubmVyRm4sIG91dGVyRm4sIHNlbGYsIHRyeUxvY3NMaXN0KSxcbiAgICAgIFByb21pc2VJbXBsXG4gICAgKTtcblxuICAgIHJldHVybiBleHBvcnRzLmlzR2VuZXJhdG9yRnVuY3Rpb24ob3V0ZXJGbilcbiAgICAgID8gaXRlciAvLyBJZiBvdXRlckZuIGlzIGEgZ2VuZXJhdG9yLCByZXR1cm4gdGhlIGZ1bGwgaXRlcmF0b3IuXG4gICAgICA6IGl0ZXIubmV4dCgpLnRoZW4oZnVuY3Rpb24ocmVzdWx0KSB7XG4gICAgICAgICAgcmV0dXJuIHJlc3VsdC5kb25lID8gcmVzdWx0LnZhbHVlIDogaXRlci5uZXh0KCk7XG4gICAgICAgIH0pO1xuICB9O1xuXG4gIGZ1bmN0aW9uIG1ha2VJbnZva2VNZXRob2QoaW5uZXJGbiwgc2VsZiwgY29udGV4dCkge1xuICAgIHZhciBzdGF0ZSA9IEdlblN0YXRlU3VzcGVuZGVkU3RhcnQ7XG5cbiAgICByZXR1cm4gZnVuY3Rpb24gaW52b2tlKG1ldGhvZCwgYXJnKSB7XG4gICAgICBpZiAoc3RhdGUgPT09IEdlblN0YXRlRXhlY3V0aW5nKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIkdlbmVyYXRvciBpcyBhbHJlYWR5IHJ1bm5pbmdcIik7XG4gICAgICB9XG5cbiAgICAgIGlmIChzdGF0ZSA9PT0gR2VuU3RhdGVDb21wbGV0ZWQpIHtcbiAgICAgICAgaWYgKG1ldGhvZCA9PT0gXCJ0aHJvd1wiKSB7XG4gICAgICAgICAgdGhyb3cgYXJnO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gQmUgZm9yZ2l2aW5nLCBwZXIgMjUuMy4zLjMuMyBvZiB0aGUgc3BlYzpcbiAgICAgICAgLy8gaHR0cHM6Ly9wZW9wbGUubW96aWxsYS5vcmcvfmpvcmVuZG9yZmYvZXM2LWRyYWZ0Lmh0bWwjc2VjLWdlbmVyYXRvcnJlc3VtZVxuICAgICAgICByZXR1cm4gZG9uZVJlc3VsdCgpO1xuICAgICAgfVxuXG4gICAgICBjb250ZXh0Lm1ldGhvZCA9IG1ldGhvZDtcbiAgICAgIGNvbnRleHQuYXJnID0gYXJnO1xuXG4gICAgICB3aGlsZSAodHJ1ZSkge1xuICAgICAgICB2YXIgZGVsZWdhdGUgPSBjb250ZXh0LmRlbGVnYXRlO1xuICAgICAgICBpZiAoZGVsZWdhdGUpIHtcbiAgICAgICAgICB2YXIgZGVsZWdhdGVSZXN1bHQgPSBtYXliZUludm9rZURlbGVnYXRlKGRlbGVnYXRlLCBjb250ZXh0KTtcbiAgICAgICAgICBpZiAoZGVsZWdhdGVSZXN1bHQpIHtcbiAgICAgICAgICAgIGlmIChkZWxlZ2F0ZVJlc3VsdCA9PT0gQ29udGludWVTZW50aW5lbCkgY29udGludWU7XG4gICAgICAgICAgICByZXR1cm4gZGVsZWdhdGVSZXN1bHQ7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGNvbnRleHQubWV0aG9kID09PSBcIm5leHRcIikge1xuICAgICAgICAgIC8vIFNldHRpbmcgY29udGV4dC5fc2VudCBmb3IgbGVnYWN5IHN1cHBvcnQgb2YgQmFiZWwnc1xuICAgICAgICAgIC8vIGZ1bmN0aW9uLnNlbnQgaW1wbGVtZW50YXRpb24uXG4gICAgICAgICAgY29udGV4dC5zZW50ID0gY29udGV4dC5fc2VudCA9IGNvbnRleHQuYXJnO1xuXG4gICAgICAgIH0gZWxzZSBpZiAoY29udGV4dC5tZXRob2QgPT09IFwidGhyb3dcIikge1xuICAgICAgICAgIGlmIChzdGF0ZSA9PT0gR2VuU3RhdGVTdXNwZW5kZWRTdGFydCkge1xuICAgICAgICAgICAgc3RhdGUgPSBHZW5TdGF0ZUNvbXBsZXRlZDtcbiAgICAgICAgICAgIHRocm93IGNvbnRleHQuYXJnO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGNvbnRleHQuZGlzcGF0Y2hFeGNlcHRpb24oY29udGV4dC5hcmcpO1xuXG4gICAgICAgIH0gZWxzZSBpZiAoY29udGV4dC5tZXRob2QgPT09IFwicmV0dXJuXCIpIHtcbiAgICAgICAgICBjb250ZXh0LmFicnVwdChcInJldHVyblwiLCBjb250ZXh0LmFyZyk7XG4gICAgICAgIH1cblxuICAgICAgICBzdGF0ZSA9IEdlblN0YXRlRXhlY3V0aW5nO1xuXG4gICAgICAgIHZhciByZWNvcmQgPSB0cnlDYXRjaChpbm5lckZuLCBzZWxmLCBjb250ZXh0KTtcbiAgICAgICAgaWYgKHJlY29yZC50eXBlID09PSBcIm5vcm1hbFwiKSB7XG4gICAgICAgICAgLy8gSWYgYW4gZXhjZXB0aW9uIGlzIHRocm93biBmcm9tIGlubmVyRm4sIHdlIGxlYXZlIHN0YXRlID09PVxuICAgICAgICAgIC8vIEdlblN0YXRlRXhlY3V0aW5nIGFuZCBsb29wIGJhY2sgZm9yIGFub3RoZXIgaW52b2NhdGlvbi5cbiAgICAgICAgICBzdGF0ZSA9IGNvbnRleHQuZG9uZVxuICAgICAgICAgICAgPyBHZW5TdGF0ZUNvbXBsZXRlZFxuICAgICAgICAgICAgOiBHZW5TdGF0ZVN1c3BlbmRlZFlpZWxkO1xuXG4gICAgICAgICAgaWYgKHJlY29yZC5hcmcgPT09IENvbnRpbnVlU2VudGluZWwpIHtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB2YWx1ZTogcmVjb3JkLmFyZyxcbiAgICAgICAgICAgIGRvbmU6IGNvbnRleHQuZG9uZVxuICAgICAgICAgIH07XG5cbiAgICAgICAgfSBlbHNlIGlmIChyZWNvcmQudHlwZSA9PT0gXCJ0aHJvd1wiKSB7XG4gICAgICAgICAgc3RhdGUgPSBHZW5TdGF0ZUNvbXBsZXRlZDtcbiAgICAgICAgICAvLyBEaXNwYXRjaCB0aGUgZXhjZXB0aW9uIGJ5IGxvb3BpbmcgYmFjayBhcm91bmQgdG8gdGhlXG4gICAgICAgICAgLy8gY29udGV4dC5kaXNwYXRjaEV4Y2VwdGlvbihjb250ZXh0LmFyZykgY2FsbCBhYm92ZS5cbiAgICAgICAgICBjb250ZXh0Lm1ldGhvZCA9IFwidGhyb3dcIjtcbiAgICAgICAgICBjb250ZXh0LmFyZyA9IHJlY29yZC5hcmc7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9O1xuICB9XG5cbiAgLy8gQ2FsbCBkZWxlZ2F0ZS5pdGVyYXRvcltjb250ZXh0Lm1ldGhvZF0oY29udGV4dC5hcmcpIGFuZCBoYW5kbGUgdGhlXG4gIC8vIHJlc3VsdCwgZWl0aGVyIGJ5IHJldHVybmluZyBhIHsgdmFsdWUsIGRvbmUgfSByZXN1bHQgZnJvbSB0aGVcbiAgLy8gZGVsZWdhdGUgaXRlcmF0b3IsIG9yIGJ5IG1vZGlmeWluZyBjb250ZXh0Lm1ldGhvZCBhbmQgY29udGV4dC5hcmcsXG4gIC8vIHNldHRpbmcgY29udGV4dC5kZWxlZ2F0ZSB0byBudWxsLCBhbmQgcmV0dXJuaW5nIHRoZSBDb250aW51ZVNlbnRpbmVsLlxuICBmdW5jdGlvbiBtYXliZUludm9rZURlbGVnYXRlKGRlbGVnYXRlLCBjb250ZXh0KSB7XG4gICAgdmFyIG1ldGhvZCA9IGRlbGVnYXRlLml0ZXJhdG9yW2NvbnRleHQubWV0aG9kXTtcbiAgICBpZiAobWV0aG9kID09PSB1bmRlZmluZWQpIHtcbiAgICAgIC8vIEEgLnRocm93IG9yIC5yZXR1cm4gd2hlbiB0aGUgZGVsZWdhdGUgaXRlcmF0b3IgaGFzIG5vIC50aHJvd1xuICAgICAgLy8gbWV0aG9kIGFsd2F5cyB0ZXJtaW5hdGVzIHRoZSB5aWVsZCogbG9vcC5cbiAgICAgIGNvbnRleHQuZGVsZWdhdGUgPSBudWxsO1xuXG4gICAgICBpZiAoY29udGV4dC5tZXRob2QgPT09IFwidGhyb3dcIikge1xuICAgICAgICAvLyBOb3RlOiBbXCJyZXR1cm5cIl0gbXVzdCBiZSB1c2VkIGZvciBFUzMgcGFyc2luZyBjb21wYXRpYmlsaXR5LlxuICAgICAgICBpZiAoZGVsZWdhdGUuaXRlcmF0b3JbXCJyZXR1cm5cIl0pIHtcbiAgICAgICAgICAvLyBJZiB0aGUgZGVsZWdhdGUgaXRlcmF0b3IgaGFzIGEgcmV0dXJuIG1ldGhvZCwgZ2l2ZSBpdCBhXG4gICAgICAgICAgLy8gY2hhbmNlIHRvIGNsZWFuIHVwLlxuICAgICAgICAgIGNvbnRleHQubWV0aG9kID0gXCJyZXR1cm5cIjtcbiAgICAgICAgICBjb250ZXh0LmFyZyA9IHVuZGVmaW5lZDtcbiAgICAgICAgICBtYXliZUludm9rZURlbGVnYXRlKGRlbGVnYXRlLCBjb250ZXh0KTtcblxuICAgICAgICAgIGlmIChjb250ZXh0Lm1ldGhvZCA9PT0gXCJ0aHJvd1wiKSB7XG4gICAgICAgICAgICAvLyBJZiBtYXliZUludm9rZURlbGVnYXRlKGNvbnRleHQpIGNoYW5nZWQgY29udGV4dC5tZXRob2QgZnJvbVxuICAgICAgICAgICAgLy8gXCJyZXR1cm5cIiB0byBcInRocm93XCIsIGxldCB0aGF0IG92ZXJyaWRlIHRoZSBUeXBlRXJyb3IgYmVsb3cuXG4gICAgICAgICAgICByZXR1cm4gQ29udGludWVTZW50aW5lbDtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBjb250ZXh0Lm1ldGhvZCA9IFwidGhyb3dcIjtcbiAgICAgICAgY29udGV4dC5hcmcgPSBuZXcgVHlwZUVycm9yKFxuICAgICAgICAgIFwiVGhlIGl0ZXJhdG9yIGRvZXMgbm90IHByb3ZpZGUgYSAndGhyb3cnIG1ldGhvZFwiKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIENvbnRpbnVlU2VudGluZWw7XG4gICAgfVxuXG4gICAgdmFyIHJlY29yZCA9IHRyeUNhdGNoKG1ldGhvZCwgZGVsZWdhdGUuaXRlcmF0b3IsIGNvbnRleHQuYXJnKTtcblxuICAgIGlmIChyZWNvcmQudHlwZSA9PT0gXCJ0aHJvd1wiKSB7XG4gICAgICBjb250ZXh0Lm1ldGhvZCA9IFwidGhyb3dcIjtcbiAgICAgIGNvbnRleHQuYXJnID0gcmVjb3JkLmFyZztcbiAgICAgIGNvbnRleHQuZGVsZWdhdGUgPSBudWxsO1xuICAgICAgcmV0dXJuIENvbnRpbnVlU2VudGluZWw7XG4gICAgfVxuXG4gICAgdmFyIGluZm8gPSByZWNvcmQuYXJnO1xuXG4gICAgaWYgKCEgaW5mbykge1xuICAgICAgY29udGV4dC5tZXRob2QgPSBcInRocm93XCI7XG4gICAgICBjb250ZXh0LmFyZyA9IG5ldyBUeXBlRXJyb3IoXCJpdGVyYXRvciByZXN1bHQgaXMgbm90IGFuIG9iamVjdFwiKTtcbiAgICAgIGNvbnRleHQuZGVsZWdhdGUgPSBudWxsO1xuICAgICAgcmV0dXJuIENvbnRpbnVlU2VudGluZWw7XG4gICAgfVxuXG4gICAgaWYgKGluZm8uZG9uZSkge1xuICAgICAgLy8gQXNzaWduIHRoZSByZXN1bHQgb2YgdGhlIGZpbmlzaGVkIGRlbGVnYXRlIHRvIHRoZSB0ZW1wb3JhcnlcbiAgICAgIC8vIHZhcmlhYmxlIHNwZWNpZmllZCBieSBkZWxlZ2F0ZS5yZXN1bHROYW1lIChzZWUgZGVsZWdhdGVZaWVsZCkuXG4gICAgICBjb250ZXh0W2RlbGVnYXRlLnJlc3VsdE5hbWVdID0gaW5mby52YWx1ZTtcblxuICAgICAgLy8gUmVzdW1lIGV4ZWN1dGlvbiBhdCB0aGUgZGVzaXJlZCBsb2NhdGlvbiAoc2VlIGRlbGVnYXRlWWllbGQpLlxuICAgICAgY29udGV4dC5uZXh0ID0gZGVsZWdhdGUubmV4dExvYztcblxuICAgICAgLy8gSWYgY29udGV4dC5tZXRob2Qgd2FzIFwidGhyb3dcIiBidXQgdGhlIGRlbGVnYXRlIGhhbmRsZWQgdGhlXG4gICAgICAvLyBleGNlcHRpb24sIGxldCB0aGUgb3V0ZXIgZ2VuZXJhdG9yIHByb2NlZWQgbm9ybWFsbHkuIElmXG4gICAgICAvLyBjb250ZXh0Lm1ldGhvZCB3YXMgXCJuZXh0XCIsIGZvcmdldCBjb250ZXh0LmFyZyBzaW5jZSBpdCBoYXMgYmVlblxuICAgICAgLy8gXCJjb25zdW1lZFwiIGJ5IHRoZSBkZWxlZ2F0ZSBpdGVyYXRvci4gSWYgY29udGV4dC5tZXRob2Qgd2FzXG4gICAgICAvLyBcInJldHVyblwiLCBhbGxvdyB0aGUgb3JpZ2luYWwgLnJldHVybiBjYWxsIHRvIGNvbnRpbnVlIGluIHRoZVxuICAgICAgLy8gb3V0ZXIgZ2VuZXJhdG9yLlxuICAgICAgaWYgKGNvbnRleHQubWV0aG9kICE9PSBcInJldHVyblwiKSB7XG4gICAgICAgIGNvbnRleHQubWV0aG9kID0gXCJuZXh0XCI7XG4gICAgICAgIGNvbnRleHQuYXJnID0gdW5kZWZpbmVkO1xuICAgICAgfVxuXG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIFJlLXlpZWxkIHRoZSByZXN1bHQgcmV0dXJuZWQgYnkgdGhlIGRlbGVnYXRlIG1ldGhvZC5cbiAgICAgIHJldHVybiBpbmZvO1xuICAgIH1cblxuICAgIC8vIFRoZSBkZWxlZ2F0ZSBpdGVyYXRvciBpcyBmaW5pc2hlZCwgc28gZm9yZ2V0IGl0IGFuZCBjb250aW51ZSB3aXRoXG4gICAgLy8gdGhlIG91dGVyIGdlbmVyYXRvci5cbiAgICBjb250ZXh0LmRlbGVnYXRlID0gbnVsbDtcbiAgICByZXR1cm4gQ29udGludWVTZW50aW5lbDtcbiAgfVxuXG4gIC8vIERlZmluZSBHZW5lcmF0b3IucHJvdG90eXBlLntuZXh0LHRocm93LHJldHVybn0gaW4gdGVybXMgb2YgdGhlXG4gIC8vIHVuaWZpZWQgLl9pbnZva2UgaGVscGVyIG1ldGhvZC5cbiAgZGVmaW5lSXRlcmF0b3JNZXRob2RzKEdwKTtcblxuICBkZWZpbmUoR3AsIHRvU3RyaW5nVGFnU3ltYm9sLCBcIkdlbmVyYXRvclwiKTtcblxuICAvLyBBIEdlbmVyYXRvciBzaG91bGQgYWx3YXlzIHJldHVybiBpdHNlbGYgYXMgdGhlIGl0ZXJhdG9yIG9iamVjdCB3aGVuIHRoZVxuICAvLyBAQGl0ZXJhdG9yIGZ1bmN0aW9uIGlzIGNhbGxlZCBvbiBpdC4gU29tZSBicm93c2VycycgaW1wbGVtZW50YXRpb25zIG9mIHRoZVxuICAvLyBpdGVyYXRvciBwcm90b3R5cGUgY2hhaW4gaW5jb3JyZWN0bHkgaW1wbGVtZW50IHRoaXMsIGNhdXNpbmcgdGhlIEdlbmVyYXRvclxuICAvLyBvYmplY3QgdG8gbm90IGJlIHJldHVybmVkIGZyb20gdGhpcyBjYWxsLiBUaGlzIGVuc3VyZXMgdGhhdCBkb2Vzbid0IGhhcHBlbi5cbiAgLy8gU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9mYWNlYm9vay9yZWdlbmVyYXRvci9pc3N1ZXMvMjc0IGZvciBtb3JlIGRldGFpbHMuXG4gIGRlZmluZShHcCwgaXRlcmF0b3JTeW1ib2wsIGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzO1xuICB9KTtcblxuICBkZWZpbmUoR3AsIFwidG9TdHJpbmdcIiwgZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIFwiW29iamVjdCBHZW5lcmF0b3JdXCI7XG4gIH0pO1xuXG4gIGZ1bmN0aW9uIHB1c2hUcnlFbnRyeShsb2NzKSB7XG4gICAgdmFyIGVudHJ5ID0geyB0cnlMb2M6IGxvY3NbMF0gfTtcblxuICAgIGlmICgxIGluIGxvY3MpIHtcbiAgICAgIGVudHJ5LmNhdGNoTG9jID0gbG9jc1sxXTtcbiAgICB9XG5cbiAgICBpZiAoMiBpbiBsb2NzKSB7XG4gICAgICBlbnRyeS5maW5hbGx5TG9jID0gbG9jc1syXTtcbiAgICAgIGVudHJ5LmFmdGVyTG9jID0gbG9jc1szXTtcbiAgICB9XG5cbiAgICB0aGlzLnRyeUVudHJpZXMucHVzaChlbnRyeSk7XG4gIH1cblxuICBmdW5jdGlvbiByZXNldFRyeUVudHJ5KGVudHJ5KSB7XG4gICAgdmFyIHJlY29yZCA9IGVudHJ5LmNvbXBsZXRpb24gfHwge307XG4gICAgcmVjb3JkLnR5cGUgPSBcIm5vcm1hbFwiO1xuICAgIGRlbGV0ZSByZWNvcmQuYXJnO1xuICAgIGVudHJ5LmNvbXBsZXRpb24gPSByZWNvcmQ7XG4gIH1cblxuICBmdW5jdGlvbiBDb250ZXh0KHRyeUxvY3NMaXN0KSB7XG4gICAgLy8gVGhlIHJvb3QgZW50cnkgb2JqZWN0IChlZmZlY3RpdmVseSBhIHRyeSBzdGF0ZW1lbnQgd2l0aG91dCBhIGNhdGNoXG4gICAgLy8gb3IgYSBmaW5hbGx5IGJsb2NrKSBnaXZlcyB1cyBhIHBsYWNlIHRvIHN0b3JlIHZhbHVlcyB0aHJvd24gZnJvbVxuICAgIC8vIGxvY2F0aW9ucyB3aGVyZSB0aGVyZSBpcyBubyBlbmNsb3NpbmcgdHJ5IHN0YXRlbWVudC5cbiAgICB0aGlzLnRyeUVudHJpZXMgPSBbeyB0cnlMb2M6IFwicm9vdFwiIH1dO1xuICAgIHRyeUxvY3NMaXN0LmZvckVhY2gocHVzaFRyeUVudHJ5LCB0aGlzKTtcbiAgICB0aGlzLnJlc2V0KHRydWUpO1xuICB9XG5cbiAgZXhwb3J0cy5rZXlzID0gZnVuY3Rpb24ob2JqZWN0KSB7XG4gICAgdmFyIGtleXMgPSBbXTtcbiAgICBmb3IgKHZhciBrZXkgaW4gb2JqZWN0KSB7XG4gICAgICBrZXlzLnB1c2goa2V5KTtcbiAgICB9XG4gICAga2V5cy5yZXZlcnNlKCk7XG5cbiAgICAvLyBSYXRoZXIgdGhhbiByZXR1cm5pbmcgYW4gb2JqZWN0IHdpdGggYSBuZXh0IG1ldGhvZCwgd2Uga2VlcFxuICAgIC8vIHRoaW5ncyBzaW1wbGUgYW5kIHJldHVybiB0aGUgbmV4dCBmdW5jdGlvbiBpdHNlbGYuXG4gICAgcmV0dXJuIGZ1bmN0aW9uIG5leHQoKSB7XG4gICAgICB3aGlsZSAoa2V5cy5sZW5ndGgpIHtcbiAgICAgICAgdmFyIGtleSA9IGtleXMucG9wKCk7XG4gICAgICAgIGlmIChrZXkgaW4gb2JqZWN0KSB7XG4gICAgICAgICAgbmV4dC52YWx1ZSA9IGtleTtcbiAgICAgICAgICBuZXh0LmRvbmUgPSBmYWxzZTtcbiAgICAgICAgICByZXR1cm4gbmV4dDtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyBUbyBhdm9pZCBjcmVhdGluZyBhbiBhZGRpdGlvbmFsIG9iamVjdCwgd2UganVzdCBoYW5nIHRoZSAudmFsdWVcbiAgICAgIC8vIGFuZCAuZG9uZSBwcm9wZXJ0aWVzIG9mZiB0aGUgbmV4dCBmdW5jdGlvbiBvYmplY3QgaXRzZWxmLiBUaGlzXG4gICAgICAvLyBhbHNvIGVuc3VyZXMgdGhhdCB0aGUgbWluaWZpZXIgd2lsbCBub3QgYW5vbnltaXplIHRoZSBmdW5jdGlvbi5cbiAgICAgIG5leHQuZG9uZSA9IHRydWU7XG4gICAgICByZXR1cm4gbmV4dDtcbiAgICB9O1xuICB9O1xuXG4gIGZ1bmN0aW9uIHZhbHVlcyhpdGVyYWJsZSkge1xuICAgIGlmIChpdGVyYWJsZSkge1xuICAgICAgdmFyIGl0ZXJhdG9yTWV0aG9kID0gaXRlcmFibGVbaXRlcmF0b3JTeW1ib2xdO1xuICAgICAgaWYgKGl0ZXJhdG9yTWV0aG9kKSB7XG4gICAgICAgIHJldHVybiBpdGVyYXRvck1ldGhvZC5jYWxsKGl0ZXJhYmxlKTtcbiAgICAgIH1cblxuICAgICAgaWYgKHR5cGVvZiBpdGVyYWJsZS5uZXh0ID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgcmV0dXJuIGl0ZXJhYmxlO1xuICAgICAgfVxuXG4gICAgICBpZiAoIWlzTmFOKGl0ZXJhYmxlLmxlbmd0aCkpIHtcbiAgICAgICAgdmFyIGkgPSAtMSwgbmV4dCA9IGZ1bmN0aW9uIG5leHQoKSB7XG4gICAgICAgICAgd2hpbGUgKCsraSA8IGl0ZXJhYmxlLmxlbmd0aCkge1xuICAgICAgICAgICAgaWYgKGhhc093bi5jYWxsKGl0ZXJhYmxlLCBpKSkge1xuICAgICAgICAgICAgICBuZXh0LnZhbHVlID0gaXRlcmFibGVbaV07XG4gICAgICAgICAgICAgIG5leHQuZG9uZSA9IGZhbHNlO1xuICAgICAgICAgICAgICByZXR1cm4gbmV4dDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG5cbiAgICAgICAgICBuZXh0LnZhbHVlID0gdW5kZWZpbmVkO1xuICAgICAgICAgIG5leHQuZG9uZSA9IHRydWU7XG5cbiAgICAgICAgICByZXR1cm4gbmV4dDtcbiAgICAgICAgfTtcblxuICAgICAgICByZXR1cm4gbmV4dC5uZXh0ID0gbmV4dDtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBSZXR1cm4gYW4gaXRlcmF0b3Igd2l0aCBubyB2YWx1ZXMuXG4gICAgcmV0dXJuIHsgbmV4dDogZG9uZVJlc3VsdCB9O1xuICB9XG4gIGV4cG9ydHMudmFsdWVzID0gdmFsdWVzO1xuXG4gIGZ1bmN0aW9uIGRvbmVSZXN1bHQoKSB7XG4gICAgcmV0dXJuIHsgdmFsdWU6IHVuZGVmaW5lZCwgZG9uZTogdHJ1ZSB9O1xuICB9XG5cbiAgQ29udGV4dC5wcm90b3R5cGUgPSB7XG4gICAgY29uc3RydWN0b3I6IENvbnRleHQsXG5cbiAgICByZXNldDogZnVuY3Rpb24oc2tpcFRlbXBSZXNldCkge1xuICAgICAgdGhpcy5wcmV2ID0gMDtcbiAgICAgIHRoaXMubmV4dCA9IDA7XG4gICAgICAvLyBSZXNldHRpbmcgY29udGV4dC5fc2VudCBmb3IgbGVnYWN5IHN1cHBvcnQgb2YgQmFiZWwnc1xuICAgICAgLy8gZnVuY3Rpb24uc2VudCBpbXBsZW1lbnRhdGlvbi5cbiAgICAgIHRoaXMuc2VudCA9IHRoaXMuX3NlbnQgPSB1bmRlZmluZWQ7XG4gICAgICB0aGlzLmRvbmUgPSBmYWxzZTtcbiAgICAgIHRoaXMuZGVsZWdhdGUgPSBudWxsO1xuXG4gICAgICB0aGlzLm1ldGhvZCA9IFwibmV4dFwiO1xuICAgICAgdGhpcy5hcmcgPSB1bmRlZmluZWQ7XG5cbiAgICAgIHRoaXMudHJ5RW50cmllcy5mb3JFYWNoKHJlc2V0VHJ5RW50cnkpO1xuXG4gICAgICBpZiAoIXNraXBUZW1wUmVzZXQpIHtcbiAgICAgICAgZm9yICh2YXIgbmFtZSBpbiB0aGlzKSB7XG4gICAgICAgICAgLy8gTm90IHN1cmUgYWJvdXQgdGhlIG9wdGltYWwgb3JkZXIgb2YgdGhlc2UgY29uZGl0aW9uczpcbiAgICAgICAgICBpZiAobmFtZS5jaGFyQXQoMCkgPT09IFwidFwiICYmXG4gICAgICAgICAgICAgIGhhc093bi5jYWxsKHRoaXMsIG5hbWUpICYmXG4gICAgICAgICAgICAgICFpc05hTigrbmFtZS5zbGljZSgxKSkpIHtcbiAgICAgICAgICAgIHRoaXNbbmFtZV0gPSB1bmRlZmluZWQ7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSxcblxuICAgIHN0b3A6IGZ1bmN0aW9uKCkge1xuICAgICAgdGhpcy5kb25lID0gdHJ1ZTtcblxuICAgICAgdmFyIHJvb3RFbnRyeSA9IHRoaXMudHJ5RW50cmllc1swXTtcbiAgICAgIHZhciByb290UmVjb3JkID0gcm9vdEVudHJ5LmNvbXBsZXRpb247XG4gICAgICBpZiAocm9vdFJlY29yZC50eXBlID09PSBcInRocm93XCIpIHtcbiAgICAgICAgdGhyb3cgcm9vdFJlY29yZC5hcmc7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB0aGlzLnJ2YWw7XG4gICAgfSxcblxuICAgIGRpc3BhdGNoRXhjZXB0aW9uOiBmdW5jdGlvbihleGNlcHRpb24pIHtcbiAgICAgIGlmICh0aGlzLmRvbmUpIHtcbiAgICAgICAgdGhyb3cgZXhjZXB0aW9uO1xuICAgICAgfVxuXG4gICAgICB2YXIgY29udGV4dCA9IHRoaXM7XG4gICAgICBmdW5jdGlvbiBoYW5kbGUobG9jLCBjYXVnaHQpIHtcbiAgICAgICAgcmVjb3JkLnR5cGUgPSBcInRocm93XCI7XG4gICAgICAgIHJlY29yZC5hcmcgPSBleGNlcHRpb247XG4gICAgICAgIGNvbnRleHQubmV4dCA9IGxvYztcblxuICAgICAgICBpZiAoY2F1Z2h0KSB7XG4gICAgICAgICAgLy8gSWYgdGhlIGRpc3BhdGNoZWQgZXhjZXB0aW9uIHdhcyBjYXVnaHQgYnkgYSBjYXRjaCBibG9jayxcbiAgICAgICAgICAvLyB0aGVuIGxldCB0aGF0IGNhdGNoIGJsb2NrIGhhbmRsZSB0aGUgZXhjZXB0aW9uIG5vcm1hbGx5LlxuICAgICAgICAgIGNvbnRleHQubWV0aG9kID0gXCJuZXh0XCI7XG4gICAgICAgICAgY29udGV4dC5hcmcgPSB1bmRlZmluZWQ7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gISEgY2F1Z2h0O1xuICAgICAgfVxuXG4gICAgICBmb3IgKHZhciBpID0gdGhpcy50cnlFbnRyaWVzLmxlbmd0aCAtIDE7IGkgPj0gMDsgLS1pKSB7XG4gICAgICAgIHZhciBlbnRyeSA9IHRoaXMudHJ5RW50cmllc1tpXTtcbiAgICAgICAgdmFyIHJlY29yZCA9IGVudHJ5LmNvbXBsZXRpb247XG5cbiAgICAgICAgaWYgKGVudHJ5LnRyeUxvYyA9PT0gXCJyb290XCIpIHtcbiAgICAgICAgICAvLyBFeGNlcHRpb24gdGhyb3duIG91dHNpZGUgb2YgYW55IHRyeSBibG9jayB0aGF0IGNvdWxkIGhhbmRsZVxuICAgICAgICAgIC8vIGl0LCBzbyBzZXQgdGhlIGNvbXBsZXRpb24gdmFsdWUgb2YgdGhlIGVudGlyZSBmdW5jdGlvbiB0b1xuICAgICAgICAgIC8vIHRocm93IHRoZSBleGNlcHRpb24uXG4gICAgICAgICAgcmV0dXJuIGhhbmRsZShcImVuZFwiKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChlbnRyeS50cnlMb2MgPD0gdGhpcy5wcmV2KSB7XG4gICAgICAgICAgdmFyIGhhc0NhdGNoID0gaGFzT3duLmNhbGwoZW50cnksIFwiY2F0Y2hMb2NcIik7XG4gICAgICAgICAgdmFyIGhhc0ZpbmFsbHkgPSBoYXNPd24uY2FsbChlbnRyeSwgXCJmaW5hbGx5TG9jXCIpO1xuXG4gICAgICAgICAgaWYgKGhhc0NhdGNoICYmIGhhc0ZpbmFsbHkpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnByZXYgPCBlbnRyeS5jYXRjaExvYykge1xuICAgICAgICAgICAgICByZXR1cm4gaGFuZGxlKGVudHJ5LmNhdGNoTG9jLCB0cnVlKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5wcmV2IDwgZW50cnkuZmluYWxseUxvYykge1xuICAgICAgICAgICAgICByZXR1cm4gaGFuZGxlKGVudHJ5LmZpbmFsbHlMb2MpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgfSBlbHNlIGlmIChoYXNDYXRjaCkge1xuICAgICAgICAgICAgaWYgKHRoaXMucHJldiA8IGVudHJ5LmNhdGNoTG9jKSB7XG4gICAgICAgICAgICAgIHJldHVybiBoYW5kbGUoZW50cnkuY2F0Y2hMb2MsIHRydWUpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgfSBlbHNlIGlmIChoYXNGaW5hbGx5KSB7XG4gICAgICAgICAgICBpZiAodGhpcy5wcmV2IDwgZW50cnkuZmluYWxseUxvYykge1xuICAgICAgICAgICAgICByZXR1cm4gaGFuZGxlKGVudHJ5LmZpbmFsbHlMb2MpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcInRyeSBzdGF0ZW1lbnQgd2l0aG91dCBjYXRjaCBvciBmaW5hbGx5XCIpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0sXG5cbiAgICBhYnJ1cHQ6IGZ1bmN0aW9uKHR5cGUsIGFyZykge1xuICAgICAgZm9yICh2YXIgaSA9IHRoaXMudHJ5RW50cmllcy5sZW5ndGggLSAxOyBpID49IDA7IC0taSkge1xuICAgICAgICB2YXIgZW50cnkgPSB0aGlzLnRyeUVudHJpZXNbaV07XG4gICAgICAgIGlmIChlbnRyeS50cnlMb2MgPD0gdGhpcy5wcmV2ICYmXG4gICAgICAgICAgICBoYXNPd24uY2FsbChlbnRyeSwgXCJmaW5hbGx5TG9jXCIpICYmXG4gICAgICAgICAgICB0aGlzLnByZXYgPCBlbnRyeS5maW5hbGx5TG9jKSB7XG4gICAgICAgICAgdmFyIGZpbmFsbHlFbnRyeSA9IGVudHJ5O1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmIChmaW5hbGx5RW50cnkgJiZcbiAgICAgICAgICAodHlwZSA9PT0gXCJicmVha1wiIHx8XG4gICAgICAgICAgIHR5cGUgPT09IFwiY29udGludWVcIikgJiZcbiAgICAgICAgICBmaW5hbGx5RW50cnkudHJ5TG9jIDw9IGFyZyAmJlxuICAgICAgICAgIGFyZyA8PSBmaW5hbGx5RW50cnkuZmluYWxseUxvYykge1xuICAgICAgICAvLyBJZ25vcmUgdGhlIGZpbmFsbHkgZW50cnkgaWYgY29udHJvbCBpcyBub3QganVtcGluZyB0byBhXG4gICAgICAgIC8vIGxvY2F0aW9uIG91dHNpZGUgdGhlIHRyeS9jYXRjaCBibG9jay5cbiAgICAgICAgZmluYWxseUVudHJ5ID0gbnVsbDtcbiAgICAgIH1cblxuICAgICAgdmFyIHJlY29yZCA9IGZpbmFsbHlFbnRyeSA/IGZpbmFsbHlFbnRyeS5jb21wbGV0aW9uIDoge307XG4gICAgICByZWNvcmQudHlwZSA9IHR5cGU7XG4gICAgICByZWNvcmQuYXJnID0gYXJnO1xuXG4gICAgICBpZiAoZmluYWxseUVudHJ5KSB7XG4gICAgICAgIHRoaXMubWV0aG9kID0gXCJuZXh0XCI7XG4gICAgICAgIHRoaXMubmV4dCA9IGZpbmFsbHlFbnRyeS5maW5hbGx5TG9jO1xuICAgICAgICByZXR1cm4gQ29udGludWVTZW50aW5lbDtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHRoaXMuY29tcGxldGUocmVjb3JkKTtcbiAgICB9LFxuXG4gICAgY29tcGxldGU6IGZ1bmN0aW9uKHJlY29yZCwgYWZ0ZXJMb2MpIHtcbiAgICAgIGlmIChyZWNvcmQudHlwZSA9PT0gXCJ0aHJvd1wiKSB7XG4gICAgICAgIHRocm93IHJlY29yZC5hcmc7XG4gICAgICB9XG5cbiAgICAgIGlmIChyZWNvcmQudHlwZSA9PT0gXCJicmVha1wiIHx8XG4gICAgICAgICAgcmVjb3JkLnR5cGUgPT09IFwiY29udGludWVcIikge1xuICAgICAgICB0aGlzLm5leHQgPSByZWNvcmQuYXJnO1xuICAgICAgfSBlbHNlIGlmIChyZWNvcmQudHlwZSA9PT0gXCJyZXR1cm5cIikge1xuICAgICAgICB0aGlzLnJ2YWwgPSB0aGlzLmFyZyA9IHJlY29yZC5hcmc7XG4gICAgICAgIHRoaXMubWV0aG9kID0gXCJyZXR1cm5cIjtcbiAgICAgICAgdGhpcy5uZXh0ID0gXCJlbmRcIjtcbiAgICAgIH0gZWxzZSBpZiAocmVjb3JkLnR5cGUgPT09IFwibm9ybWFsXCIgJiYgYWZ0ZXJMb2MpIHtcbiAgICAgICAgdGhpcy5uZXh0ID0gYWZ0ZXJMb2M7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBDb250aW51ZVNlbnRpbmVsO1xuICAgIH0sXG5cbiAgICBmaW5pc2g6IGZ1bmN0aW9uKGZpbmFsbHlMb2MpIHtcbiAgICAgIGZvciAodmFyIGkgPSB0aGlzLnRyeUVudHJpZXMubGVuZ3RoIC0gMTsgaSA+PSAwOyAtLWkpIHtcbiAgICAgICAgdmFyIGVudHJ5ID0gdGhpcy50cnlFbnRyaWVzW2ldO1xuICAgICAgICBpZiAoZW50cnkuZmluYWxseUxvYyA9PT0gZmluYWxseUxvYykge1xuICAgICAgICAgIHRoaXMuY29tcGxldGUoZW50cnkuY29tcGxldGlvbiwgZW50cnkuYWZ0ZXJMb2MpO1xuICAgICAgICAgIHJlc2V0VHJ5RW50cnkoZW50cnkpO1xuICAgICAgICAgIHJldHVybiBDb250aW51ZVNlbnRpbmVsO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSxcblxuICAgIFwiY2F0Y2hcIjogZnVuY3Rpb24odHJ5TG9jKSB7XG4gICAgICBmb3IgKHZhciBpID0gdGhpcy50cnlFbnRyaWVzLmxlbmd0aCAtIDE7IGkgPj0gMDsgLS1pKSB7XG4gICAgICAgIHZhciBlbnRyeSA9IHRoaXMudHJ5RW50cmllc1tpXTtcbiAgICAgICAgaWYgKGVudHJ5LnRyeUxvYyA9PT0gdHJ5TG9jKSB7XG4gICAgICAgICAgdmFyIHJlY29yZCA9IGVudHJ5LmNvbXBsZXRpb247XG4gICAgICAgICAgaWYgKHJlY29yZC50eXBlID09PSBcInRocm93XCIpIHtcbiAgICAgICAgICAgIHZhciB0aHJvd24gPSByZWNvcmQuYXJnO1xuICAgICAgICAgICAgcmVzZXRUcnlFbnRyeShlbnRyeSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiB0aHJvd247XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy8gVGhlIGNvbnRleHQuY2F0Y2ggbWV0aG9kIG11c3Qgb25seSBiZSBjYWxsZWQgd2l0aCBhIGxvY2F0aW9uXG4gICAgICAvLyBhcmd1bWVudCB0aGF0IGNvcnJlc3BvbmRzIHRvIGEga25vd24gY2F0Y2ggYmxvY2suXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJpbGxlZ2FsIGNhdGNoIGF0dGVtcHRcIik7XG4gICAgfSxcblxuICAgIGRlbGVnYXRlWWllbGQ6IGZ1bmN0aW9uKGl0ZXJhYmxlLCByZXN1bHROYW1lLCBuZXh0TG9jKSB7XG4gICAgICB0aGlzLmRlbGVnYXRlID0ge1xuICAgICAgICBpdGVyYXRvcjogdmFsdWVzKGl0ZXJhYmxlKSxcbiAgICAgICAgcmVzdWx0TmFtZTogcmVzdWx0TmFtZSxcbiAgICAgICAgbmV4dExvYzogbmV4dExvY1xuICAgICAgfTtcblxuICAgICAgaWYgKHRoaXMubWV0aG9kID09PSBcIm5leHRcIikge1xuICAgICAgICAvLyBEZWxpYmVyYXRlbHkgZm9yZ2V0IHRoZSBsYXN0IHNlbnQgdmFsdWUgc28gdGhhdCB3ZSBkb24ndFxuICAgICAgICAvLyBhY2NpZGVudGFsbHkgcGFzcyBpdCBvbiB0byB0aGUgZGVsZWdhdGUuXG4gICAgICAgIHRoaXMuYXJnID0gdW5kZWZpbmVkO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gQ29udGludWVTZW50aW5lbDtcbiAgICB9XG4gIH07XG5cbiAgLy8gUmVnYXJkbGVzcyBvZiB3aGV0aGVyIHRoaXMgc2NyaXB0IGlzIGV4ZWN1dGluZyBhcyBhIENvbW1vbkpTIG1vZHVsZVxuICAvLyBvciBub3QsIHJldHVybiB0aGUgcnVudGltZSBvYmplY3Qgc28gdGhhdCB3ZSBjYW4gZGVjbGFyZSB0aGUgdmFyaWFibGVcbiAgLy8gcmVnZW5lcmF0b3JSdW50aW1lIGluIHRoZSBvdXRlciBzY29wZSwgd2hpY2ggYWxsb3dzIHRoaXMgbW9kdWxlIHRvIGJlXG4gIC8vIGluamVjdGVkIGVhc2lseSBieSBgYmluL3JlZ2VuZXJhdG9yIC0taW5jbHVkZS1ydW50aW1lIHNjcmlwdC5qc2AuXG4gIHJldHVybiBleHBvcnRzO1xuXG59KFxuICAvLyBJZiB0aGlzIHNjcmlwdCBpcyBleGVjdXRpbmcgYXMgYSBDb21tb25KUyBtb2R1bGUsIHVzZSBtb2R1bGUuZXhwb3J0c1xuICAvLyBhcyB0aGUgcmVnZW5lcmF0b3JSdW50aW1lIG5hbWVzcGFjZS4gT3RoZXJ3aXNlIGNyZWF0ZSBhIG5ldyBlbXB0eVxuICAvLyBvYmplY3QuIEVpdGhlciB3YXksIHRoZSByZXN1bHRpbmcgb2JqZWN0IHdpbGwgYmUgdXNlZCB0byBpbml0aWFsaXplXG4gIC8vIHRoZSByZWdlbmVyYXRvclJ1bnRpbWUgdmFyaWFibGUgYXQgdGhlIHRvcCBvZiB0aGlzIGZpbGUuXG4gIHR5cGVvZiBtb2R1bGUgPT09IFwib2JqZWN0XCIgPyBtb2R1bGUuZXhwb3J0cyA6IHt9XG4pKTtcblxudHJ5IHtcbiAgcmVnZW5lcmF0b3JSdW50aW1lID0gcnVudGltZTtcbn0gY2F0Y2ggKGFjY2lkZW50YWxTdHJpY3RNb2RlKSB7XG4gIC8vIFRoaXMgbW9kdWxlIHNob3VsZCBub3QgYmUgcnVubmluZyBpbiBzdHJpY3QgbW9kZSwgc28gdGhlIGFib3ZlXG4gIC8vIGFzc2lnbm1lbnQgc2hvdWxkIGFsd2F5cyB3b3JrIHVubGVzcyBzb21ldGhpbmcgaXMgbWlzY29uZmlndXJlZC4gSnVzdFxuICAvLyBpbiBjYXNlIHJ1bnRpbWUuanMgYWNjaWRlbnRhbGx5IHJ1bnMgaW4gc3RyaWN0IG1vZGUsIGluIG1vZGVybiBlbmdpbmVzXG4gIC8vIHdlIGNhbiBleHBsaWNpdGx5IGFjY2VzcyBnbG9iYWxUaGlzLiBJbiBvbGRlciBlbmdpbmVzIHdlIGNhbiBlc2NhcGVcbiAgLy8gc3RyaWN0IG1vZGUgdXNpbmcgYSBnbG9iYWwgRnVuY3Rpb24gY2FsbC4gVGhpcyBjb3VsZCBjb25jZWl2YWJseSBmYWlsXG4gIC8vIGlmIGEgQ29udGVudCBTZWN1cml0eSBQb2xpY3kgZm9yYmlkcyB1c2luZyBGdW5jdGlvbiwgYnV0IGluIHRoYXQgY2FzZVxuICAvLyB0aGUgcHJvcGVyIHNvbHV0aW9uIGlzIHRvIGZpeCB0aGUgYWNjaWRlbnRhbCBzdHJpY3QgbW9kZSBwcm9ibGVtLiBJZlxuICAvLyB5b3UndmUgbWlzY29uZmlndXJlZCB5b3VyIGJ1bmRsZXIgdG8gZm9yY2Ugc3RyaWN0IG1vZGUgYW5kIGFwcGxpZWQgYVxuICAvLyBDU1AgdG8gZm9yYmlkIEZ1bmN0aW9uLCBhbmQgeW91J3JlIG5vdCB3aWxsaW5nIHRvIGZpeCBlaXRoZXIgb2YgdGhvc2VcbiAgLy8gcHJvYmxlbXMsIHBsZWFzZSBkZXRhaWwgeW91ciB1bmlxdWUgcHJlZGljYW1lbnQgaW4gYSBHaXRIdWIgaXNzdWUuXG4gIGlmICh0eXBlb2YgZ2xvYmFsVGhpcyA9PT0gXCJvYmplY3RcIikge1xuICAgIGdsb2JhbFRoaXMucmVnZW5lcmF0b3JSdW50aW1lID0gcnVudGltZTtcbiAgfSBlbHNlIHtcbiAgICBGdW5jdGlvbihcInJcIiwgXCJyZWdlbmVyYXRvclJ1bnRpbWUgPSByXCIpKHJ1bnRpbWUpO1xuICB9XG59XG4iLCIvLyBUaGUgbW9kdWxlIGNhY2hlXG52YXIgX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fID0ge307XG5cbi8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG5mdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuXHR2YXIgY2FjaGVkTW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXTtcblx0aWYgKGNhY2hlZE1vZHVsZSAhPT0gdW5kZWZpbmVkKSB7XG5cdFx0cmV0dXJuIGNhY2hlZE1vZHVsZS5leHBvcnRzO1xuXHR9XG5cdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG5cdHZhciBtb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdID0ge1xuXHRcdGlkOiBtb2R1bGVJZCxcblx0XHRsb2FkZWQ6IGZhbHNlLFxuXHRcdGV4cG9ydHM6IHt9XG5cdH07XG5cblx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG5cdF9fd2VicGFja19tb2R1bGVzX19bbW9kdWxlSWRdKG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG5cdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcblx0bW9kdWxlLmxvYWRlZCA9IHRydWU7XG5cblx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcblx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xufVxuXG4iLCJfX3dlYnBhY2tfcmVxdWlyZV9fLm5tZCA9IChtb2R1bGUpID0+IHtcblx0bW9kdWxlLnBhdGhzID0gW107XG5cdGlmICghbW9kdWxlLmNoaWxkcmVuKSBtb2R1bGUuY2hpbGRyZW4gPSBbXTtcblx0cmV0dXJuIG1vZHVsZTtcbn07IiwiX193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjsiLCIvLyAqKiogV3JhcHBlcnMgKioqXHJcbmNvbnN0IGVkaXRNb2RhbEVsID0gXCJtb2RhbF90eXBlX2VkaXRcIjtcclxuY29uc3QgZWRpdEZvcm1Nb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2Zvcm1fdHlwZV9lZGl0XCIpO1xyXG5jb25zdCBlZGl0QXZhdGFyRWwgPSBcIm1vZGFsX3R5cGVfZWRpdC1hdmF0YXJcIjtcclxuY29uc3QgZWRpdEF2YXRhckZvcm1Nb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2Zvcm1fdHlwZV9lZGl0LWF2YXRhclwiKTtcclxuY29uc3QgYWRkTW9kYWxFbCA9IFwibW9kYWxfdHlwZV9hZGRcIjtcclxuY29uc3QgYWRkRm9ybU1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fZm9ybV90eXBlX2FkZFwiKTtcclxuY29uc3QgZGVsZXRlTW9kYWxFbCA9IFwibW9kYWxfdHlwZV9kZWxldGVcIjtcclxuXHJcbmNvbnN0IHBsYWNlc0xpc3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnBsYWNlc19fbGlzdFwiKTtcclxuXHJcblxyXG4vLyAqKiogQnV0dG9ucyAqKipcclxuY29uc3QgcHJvZmlsZUVkaXRCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2VkaXQtYnV0dG9uXCIpO1xyXG5jb25zdCBjYXJkQWRkQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19hZGQtYnV0dG9uXCIpO1xyXG5jb25zdCBjYXJkRGVsZXRlQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5jYXJkX19kZWxldGUtYnV0dG9uXCIpO1xyXG5cclxuXHJcbi8vICoqKiBGb3JtIGRhdGEgKioqXHJcbmNvbnN0IG1vZGFsSW5wdXROYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9faW5wdXRfY29udGVudF9uYW1lXCIpO1xyXG5jb25zdCBtb2RhbElucHV0UHJvZmVzc2lvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2lucHV0X2NvbnRlbnRfcHJvZmVzc2lvblwiKTtcclxuY29uc3QgbW9kYWxJbnB1dEF2YXRhciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2lucHV0X2NvbnRlbnRfYXZhdGFyLWxpbmtcIik7XHJcblxyXG5jb25zdCBmb3JtU2V0dGluZ3MgPSB7XHJcbiAgICBfaW5wdXRTZWxlY3RvcjogXCIubW9kYWxfX2lucHV0XCIsXHJcbiAgICBfc3VibWl0QnV0dG9uU2VsZWN0b3I6IFwiLm1vZGFsX19zYXZlLWJ1dHRvblwiLFxyXG4gICAgX2lucHV0RXJyb3JDbGFzczogXCIubW9kYWxfX2lucHV0LWVycm9yXCIsXHJcbiAgICBfYWN0aXZlSW5wdXRFcnJvckNsYXNzOiBcIm1vZGFsX19pbnB1dC1lcnJvcl9hY3RpdmVcIixcclxuICAgIF9pbmFjdGl2ZUJ1dHRvbkNsYXNzOiBcIm1vZGFsX19zYXZlLWJ1dHRvbl9pbmFjdGl2ZVwiXHJcbn1cclxuXHJcblxyXG4vLyAqKiogSW1hZ2UgUHJldmlldyBNb2RhbCAqKipcclxuY29uc3QgaW1hZ2VDbG9zZXVwUHJldmlld0VsID0gXCJtb2RhbF90eXBlX2ltYWdlLXByZXZpZXdcIjtcclxuY29uc3QgaW1hZ2VQcmV2aWV3RWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19pbWFnZVwiKTtcclxuY29uc3QgY2FwdGlvblByZXZpZXdFbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2NhcHRpb25cIik7XHJcblxyXG5cclxuLy8gKioqIENhcmRzICoqKlxyXG5jb25zdCBjYXJkU2VsZWN0b3IgPSBcIi5jYXJkX190ZW1wbGF0ZVwiOyBcclxuXHJcbi8vICoqKiBQcm9maWxlICoqKlxyXG5jb25zdCBoZWFkZXJMb2dvID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5oZWFkZXJfX2xvZ29cIik7XHJcbmNvbnN0IHByb2ZpbGVOYW1lID0gXCIucHJvZmlsZV9fbmFtZVwiO1xyXG5jb25zdCBwcm9maWxlUHJvZmVzc2lvbiA9IFwiLnByb2ZpbGVfX3Byb2Zlc3Npb25cIjtcclxuY29uc3QgYXZhdGFyQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19hdmF0YXItYnV0dG9uXCIpO1xyXG5jb25zdCBwcm9maWxlQXZhdGFyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19hdmF0YXJcIik7XHJcblxyXG5cclxuZXhwb3J0IHtoZWFkZXJMb2dvLCBwcm9maWxlTmFtZSwgcHJvZmlsZVByb2Zlc3Npb24sIHByb2ZpbGVBdmF0YXIsIHByb2ZpbGVFZGl0QnV0dG9uLCBhdmF0YXJCdXR0b24sIFxyXG4gICAgICAgZWRpdE1vZGFsRWwsIGVkaXRGb3JtTW9kYWwsIGVkaXRBdmF0YXJFbCwgZWRpdEF2YXRhckZvcm1Nb2RhbCwgbW9kYWxJbnB1dE5hbWUsIG1vZGFsSW5wdXRQcm9mZXNzaW9uLCBtb2RhbElucHV0QXZhdGFyLFxyXG4gICAgICAgY2FyZEFkZEJ1dHRvbiwgYWRkTW9kYWxFbCwgYWRkRm9ybU1vZGFsLCBjYXJkU2VsZWN0b3IsIHBsYWNlc0xpc3QsIGltYWdlQ2xvc2V1cFByZXZpZXdFbCxcclxuICAgICAgIGltYWdlUHJldmlld0VsLCBjYXB0aW9uUHJldmlld0VsLCBjYXJkRGVsZXRlQnV0dG9uLCBkZWxldGVNb2RhbEVsLCBmb3JtU2V0dGluZ3N9XHJcblxyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBBcGkge1xyXG4gICAgY29uc3RydWN0b3Ioe2Jhc2VVcmwsIGF1dGhUb2tlbn0pIHtcclxuICAgICAgICB0aGlzLl9iYXNlVXJsID0gYmFzZVVybDtcclxuICAgICAgICB0aGlzLl9hdXRoVG9rZW4gPSBhdXRoVG9rZW5cclxuICAgIH1cclxuXHJcbiAgICBnZXRVc2VySW5mbygpIHtcclxuICAgICAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vdXNlcnMvbWVgLCB7XHJcbiAgICAgICAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICAgICAgICAgIGF1dGhvcml6YXRpb246IHRoaXMuX2F1dGhUb2tlblxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSlcclxuICAgICAgICAudGhlbihyZXMgPT4gdGhpcy5fZ2V0UmVzcG9uc2VEYXRhKHJlcykpO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICBnZXRDYXJkcygpIHtcclxuICAgICAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vY2FyZHNgLCB7XHJcbiAgICAgICAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICAgICAgICAgIGF1dGhvcml6YXRpb246IHRoaXMuX2F1dGhUb2tlblxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSlcclxuICAgICAgICAudGhlbihyZXMgPT4gdGhpcy5fZ2V0UmVzcG9uc2VEYXRhKHJlcykpO1xyXG4gICAgfVxyXG5cclxuICAgIGVkaXRVc2VySW5mbyhkYXRhKSB7XHJcbiAgICAgICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L3VzZXJzL21lYCwge1xyXG4gICAgICAgICAgICBtZXRob2Q6IFwiUEFUQ0hcIixcclxuICAgICAgICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgICAgICAgICAgYXV0aG9yaXphdGlvbjogdGhpcy5fYXV0aFRva2VuLFxyXG4gICAgICAgICAgICAgICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCJcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xyXG4gICAgICAgICAgICAgICAgbmFtZTogZGF0YS5uYW1lLFxyXG4gICAgICAgICAgICAgICAgYWJvdXQ6IGRhdGEuYWJvdXRcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICB9KVxyXG4gICAgICAgIC50aGVuKHJlcyA9PiB0aGlzLl9nZXRSZXNwb25zZURhdGEocmVzKSk7XHJcbiAgICB9XHJcblxyXG4gICAgZWRpdFVzZXJBdmF0YXIoZGF0YSkge1xyXG4gICAgICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS91c2Vycy9tZS9hdmF0YXJgLCB7XHJcbiAgICAgICAgICAgIG1ldGhvZDogXCJQQVRDSFwiLCBcclxuICAgICAgICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgICAgICAgICAgYXV0aG9yaXphdGlvbjogdGhpcy5fYXV0aFRva2VuLFxyXG4gICAgICAgICAgICAgICAgXCJDb250ZW50LXR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCJcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xyXG4gICAgICAgICAgICAgICAgYXZhdGFyOiBkYXRhLmF2YXRhclxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLnRoZW4ocmVzID0+IHRoaXMuX2dldFJlc3BvbnNlRGF0YShyZXMpKTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgYWRkQ2FyZChkYXRhKSB7XHJcbiAgICAgICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzYCwge1xyXG4gICAgICAgICAgICBtZXRob2Q6IFwiUE9TVFwiLFxyXG4gICAgICAgICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgICAgICAgICBhdXRob3JpemF0aW9uOiB0aGlzLl9hdXRoVG9rZW4sXHJcbiAgICAgICAgICAgICAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIlxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XHJcbiAgICAgICAgICAgICAgICBuYW1lOiBkYXRhLm5hbWUsXHJcbiAgICAgICAgICAgICAgICBsaW5rOiBkYXRhLmxpbmtcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICB9KVxyXG4gICAgICAgIC50aGVuKHJlcyA9PiB0aGlzLl9nZXRSZXNwb25zZURhdGEocmVzKSk7XHJcbiAgICB9XHJcblxyXG4gICAgZGVsZXRlQ2FyZChjYXJkSWQpIHtcclxuICAgICAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vY2FyZHMvJHtjYXJkSWR9YCwge1xyXG4gICAgICAgICAgICBtZXRob2Q6IFwiREVMRVRFXCIsXHJcbiAgICAgICAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICAgICAgICAgIGF1dGhvcml6YXRpb246IHRoaXMuX2F1dGhUb2tlbixcclxuICAgICAgICAgICAgICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KVxyXG4gICAgICAgIC50aGVuKHJlcyA9PiB0aGlzLl9nZXRSZXNwb25zZURhdGEocmVzKSk7XHJcbiAgICB9XHJcblxyXG4gICAgYWRkTGlrZShjYXJkSWQpIHtcclxuICAgICAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vY2FyZHMvbGlrZXMvJHtjYXJkSWR9YCwge1xyXG4gICAgICAgICAgICBtZXRob2Q6IFwiUFVUXCIsXHJcbiAgICAgICAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICAgICAgICAgIGF1dGhvcml6YXRpb246IHRoaXMuX2F1dGhUb2tlbixcclxuICAgICAgICAgICAgICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KVxyXG4gICAgICAgIC50aGVuKHJlcyA9PiB0aGlzLl9nZXRSZXNwb25zZURhdGEocmVzKSk7XHJcbiAgICB9XHJcblxyXG4gICAgZGVsZXRlTGlrZShjYXJkSWQpIHtcclxuICAgICAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vY2FyZHMvbGlrZXMvJHtjYXJkSWR9YCwge1xyXG4gICAgICAgICAgICBtZXRob2Q6IFwiREVMRVRFXCIsXHJcbiAgICAgICAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICAgICAgICAgIGF1dGhvcml6YXRpb246IHRoaXMuX2F1dGhUb2tlbixcclxuICAgICAgICAgICAgICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KVxyXG4gICAgICAgIC50aGVuKHJlcyA9PiB0aGlzLl9nZXRSZXNwb25zZURhdGEocmVzKSk7XHJcbiAgICB9XHJcblxyXG4gICAgX2dldFJlc3BvbnNlRGF0YShyZXMpIHtcclxuICAgICAgICBpZighcmVzLm9rKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChgRXJyOiAke3Jlcy5zdGF0dXN9YCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiByZXMuanNvbigpXHJcbiAgICB9XHJcbn0iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBVc2VySW5mbyB7XHJcbiAgICBjb25zdHJ1Y3Rvcihwcm9maWxlTmFtZSwgcHJvZmlsZVByb2Zlc3Npb24sIHByb2ZpbGVBdmF0YXIpIHtcclxuICAgICAgICB0aGlzLl9wcm9maWxlTmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IocHJvZmlsZU5hbWUpO1xyXG4gICAgICAgIHRoaXMuX3Byb2ZpbGVQcm9mZXNzaW9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihwcm9maWxlUHJvZmVzc2lvbik7XHJcbiAgICAgICAgdGhpcy5fcHJvZmlsZUF2YXRhciA9IHByb2ZpbGVBdmF0YXI7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0VXNlckluZm8oKSB7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgbmFtZTogdGhpcy5fcHJvZmlsZU5hbWUudGV4dENvbnRlbnQsXHJcbiAgICAgICAgICAgIHByb2Zlc3Npb246IHRoaXMuX3Byb2ZpbGVQcm9mZXNzaW9uLnRleHRDb250ZW50XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGdldElkKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9pZDtcclxuICAgIH1cclxuXHJcbiAgICBzZXRVc2VySW5mbyhkYXRhKSB7XHJcbiAgICAgICAgdGhpcy5fcHJvZmlsZU5hbWUudGV4dENvbnRlbnQgPSBkYXRhLm5hbWUsXHJcbiAgICAgICAgdGhpcy5fcHJvZmlsZVByb2Zlc3Npb24udGV4dENvbnRlbnQgPSBkYXRhLmFib3V0LFxyXG4gICAgICAgIHRoaXMuX3Byb2ZpbGVBdmF0YXIuc3R5bGUuYmFja2dyb3VuZEltYWdlID0gYHVybCgke2RhdGEuYXZhdGFyfSlgLFxyXG4gICAgICAgIHRoaXMuX2lkID0gZGF0YS5faWQ7XHJcbiAgICB9XHJcblxyXG4gICAgc2V0VXNlckF2YXRhcihkYXRhKSB7XHJcbiAgICAgICAgdGhpcy5fcHJvZmlsZUF2YXRhci5zdHlsZS5iYWNrZ3JvdW5kSW1hZ2UgPSBgdXJsKCR7ZGF0YS5hdmF0YXJ9KWA7XHJcbiAgICB9XHJcbn0iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBTZWN0aW9uIHtcclxuICAgIGNvbnN0cnVjdG9yKHtyZW5kZXJlcn0sIGNvbnRhaW5lclNlbGVjdG9yKSB7XHJcbiAgICAgICAgdGhpcy5fcmVuZGVyZXIgPSByZW5kZXJlcjtcclxuICAgICAgICB0aGlzLl9jb250YWluZXIgPSBjb250YWluZXJTZWxlY3RvcjtcclxuICAgIH1cclxuXHJcbiAgICByZW5kZXJJdGVtcyhpdGVtcykge1xyXG4gICAgICAgIGl0ZW1zLmZvckVhY2godGhpcy5hZGRJdGVtKTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgYWRkSXRlbSA9IGNhcmQgPT4ge1xyXG4gICAgICAgIGNvbnN0IGNhcmRFbGVtZW50ID0gdGhpcy5fcmVuZGVyZXIoY2FyZCk7XHJcbiAgICAgICAgdGhpcy5fY29udGFpbmVyLnByZXBlbmQoY2FyZEVsZW1lbnQpO1xyXG4gICAgfVxyXG59XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwIHtcclxuICAgIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcclxuICAgICAgICB0aGlzLl9wb3B1cEVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGAuJHtwb3B1cFNlbGVjdG9yfWApO1xyXG4gICAgICAgIHRoaXMuX2hhbmRsZUVzY1VwID0gdGhpcy5faGFuZGxlRXNjVXAuYmluZCh0aGlzKTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgb3BlbigpIHtcclxuICAgICAgICB0aGlzLl9wb3B1cEVsZW1lbnQuY2xhc3NMaXN0LmFkZChcIm1vZGFsX29wZW5cIik7XHJcbiAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImtleXVwXCIsIHRoaXMuX2hhbmRsZUVzY1VwKTtcclxuICAgICAgICB0aGlzLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIGNsb3NlKCkge1xyXG4gICAgICAgIHRoaXMuX3BvcHVwRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKFwibW9kYWxfb3BlblwiKTtcclxuICAgICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwia2V5dXBcIiwgdGhpcy5faGFuZGxlRXNjVXApO1xyXG4gICAgICAgIHRoaXMuX3BvcHVwRWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgdGhpcy5faGFuZGxlQ2xpY2spO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICBfaGFuZGxlRXNjVXAgPSAoZXZ0KSA9PiB7XHJcbiAgICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7IFxyXG4gICAgICAgIGlmKGV2dC5rZXkgPT09IFwiRXNjYXBlXCIpIHtcclxuICAgICAgICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIFxyXG4gICAgX2hhbmRsZUNsaWNrID0gKGV2dCkgPT4ge1xyXG4gICAgICAgIGlmKChldnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnbW9kYWwnKSkgfHwgKGV2dC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdtb2RhbF9fY2xvc2UtYnV0dG9uJykpKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICAgICAgdGhpcy5fcG9wdXBFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCB0aGlzLl9oYW5kbGVDbGljayk7XHJcbiAgICB9XHJcbn0iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vcG9wdXAuanNcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEltYWdlIGV4dGVuZHMgUG9wdXAge1xyXG4gICAgb3Blbih7bGluaywgbmFtZX0pIHtcclxuICAgICAgICB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcignLm1vZGFsX19jYXB0aW9uJykudGV4dENvbnRlbnQgPSBuYW1lO1xyXG4gICAgICAgIGNvbnN0IGltYWdlRWxlbWVudCA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKCcubW9kYWxfX2ltYWdlJyk7XHJcbiAgICAgICAgaW1hZ2VFbGVtZW50LnNyYyA9IGxpbms7XHJcbiAgICAgICAgaW1hZ2VFbGVtZW50LmFsdCA9IGAke25hbWV9YDtcclxuICAgICAgICBzdXBlci5vcGVuKCk7XHJcbiAgICB9XHJcbn1cclxuIiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL3BvcHVwLmpzXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhGb3JtIGV4dGVuZHMgUG9wdXAge1xyXG4gICAgY29uc3RydWN0b3IocG9wdXBTZWxlY3RvciwgaGFuZGxlRm9ybVN1Ym1pdCkge1xyXG4gICAgICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xyXG4gICAgICAgIHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQgPSBoYW5kbGVGb3JtU3VibWl0O1xyXG4gICAgICAgIHRoaXMuX3BvcHVwRm9ybSA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19mb3JtXCIpO1xyXG4gICAgfVxyXG5cclxuICAgIF9nZXRJbnB1dFZhbHVlcygpIHtcclxuICAgICAgICBjb25zdCBmb3JtVmFsdWVzID0ge307XHJcblxyXG4gICAgICAgIHRoaXMuX2lucHV0RWxlbWVudHMgPSBBcnJheS5mcm9tKHRoaXMuX3BvcHVwRm9ybS5lbGVtZW50cyk7XHJcbiAgICAgICAgdGhpcy5faW5wdXRFbGVtZW50cy5mb3JFYWNoKChpbnB1dCkgPT4ge1xyXG4gICAgICAgICAgICBmb3JtVmFsdWVzW2lucHV0Lm5hbWVdID0gaW5wdXQudmFsdWU7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgcmV0dXJuIGZvcm1WYWx1ZXM7XHJcbiAgICB9XHJcblxyXG4gICAgY2xvc2UoKSB7XHJcbiAgICAgICAgdGhpcy5fcG9wdXBGb3JtLnJlc2V0KCk7XHJcbiAgICAgICAgdGhpcy5fcG9wdXBGb3JtLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgdGhpcy5fc3VibWl0SGFuZGxlcik7XHJcbiAgICAgICAgc3VwZXIuY2xvc2UoKTtcclxuICAgIH1cclxuXHJcbiAgICBfaGFuZGxlU3VibWl0ID0gKGV2dCkgPT4ge1xyXG4gICAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgIHRoaXMudG9nZ2xlU2F2ZUJ1dHRvbigpO1xyXG4gICAgICAgIHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQodGhpcy5fZ2V0SW5wdXRWYWx1ZXMoKSk7IFxyXG4gICAgfVxyXG4gICAgXHJcbiAgICBzZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgICAgICB0aGlzLl9wb3B1cEZvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCB0aGlzLl9oYW5kbGVTdWJtaXQpO1xyXG4gICAgICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgICB9XHJcblxyXG4gICAgdG9nZ2xlU2F2ZUJ1dHRvbigpIHtcclxuICAgICAgICBjb25zdCBzYXZlQnV0dG9uID0gdGhpcy5fcG9wdXBGb3JtLnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX3NhdmUtYnV0dG9uXCIpO1xyXG5cclxuICAgICAgICBpZihzYXZlQnV0dG9uLnRleHRDb250ZW50ID09PSBzYXZlQnV0dG9uLmlkKSB7XHJcbiAgICAgICAgICAgIHNhdmVCdXR0b24udGV4dENvbnRlbnQgPSBcIlNhdmluZy4uLlwiO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHNhdmVCdXR0b24udGV4dENvbnRlbnQgPSBzYXZlQnV0dG9uLmlkO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4iLCJpbXBvcnQgUG9wdXBXaXRoRm9ybSBmcm9tIFwiLi9wb3B1cC13aXRoLWZvcm0uanNcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aFZlcmlmaWNhdGlvbiBleHRlbmRzIFBvcHVwV2l0aEZvcm0ge1xyXG4gICAgY29uc3RydWN0b3IocG9wdXBTZWxlY3RvciwgaGFuZGxlRm9ybVN1Ym1pdCkge1xyXG4gICAgICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IsIGhhbmRsZUZvcm1TdWJtaXQpO1xyXG4gICAgfVxyXG5cclxuICAgIG9wZW4oY2FyZElkLCBjYXJkRWxlbWVudCkge1xyXG4gICAgICAgIHRoaXMuX2NhcmRJZCA9IGNhcmRJZDtcclxuICAgICAgICB0aGlzLl9jYXJkRWxlbWVudCA9IGNhcmRFbGVtZW50O1xyXG4gICAgICAgIHN1cGVyLm9wZW4oKTtcclxuICAgIH1cclxuXHJcbiAgICBfaGFuZGxlU3VibWl0ID0gKGV2dCkgPT4ge1xyXG4gICAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgIHRoaXMuX3BvcHVwRm9ybS5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19zYXZlLWJ1dHRvblwiKS50ZXh0Q29udGVudCA9IChcIlNhdmluZy4uLlwiKTtcclxuICAgICAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0KHRoaXMuX2NhcmRJZCwgdGhpcy5fY2FyZEVsZW1lbnQpOyBcclxuICAgIH1cclxufSIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIEZvcm1WYWxpZGF0b3Ige1xyXG4gICAgY29uc3RydWN0b3Ioc2V0dGluZ3MsIGZvcm1FbGVtZW50KSB7XHJcbiAgICAgICAgdGhpcy5faW5wdXRTZWxlY3RvciA9IHNldHRpbmdzLl9pbnB1dFNlbGVjdG9yO1xyXG4gICAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvblNlbGVjdG9yID0gc2V0dGluZ3MuX3N1Ym1pdEJ1dHRvblNlbGVjdG9yO1xyXG4gICAgICAgIHRoaXMuX2lucHV0RXJyb3JDbGFzcyA9IHNldHRpbmdzLl9pbnB1dEVycm9yQ2xhc3M7XHJcbiAgICAgICAgdGhpcy5fYWN0aXZlSW5wdXRFcnJvckNsYXNzID0gc2V0dGluZ3MuX2FjdGl2ZUlucHV0RXJyb3JDbGFzcztcclxuICAgICAgICB0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzID0gc2V0dGluZ3MuX2luYWN0aXZlQnV0dG9uQ2xhc3M7XHJcblxyXG4gICAgICAgIHRoaXMuX2Zvcm0gPSBmb3JtRWxlbWVudDtcclxuICAgIH1cclxuXHJcbiAgICBfaGFzVmFsaWRJbnB1dHMoKXtcclxuICAgICAgICBpZih0aGlzLl9pbnB1dEVsZW1lbnRzLmV2ZXJ5KChpbnB1dEVsKSA9PiBpbnB1dEVsLnZhbGlkaXR5LnZhbGlkKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBcclxuICAgIF90b2dnbGVCdXR0b24oKSB7XHJcbiAgICAgICAgaWYodGhpcy5faGFzVmFsaWRJbnB1dHMoKSkge1xyXG4gICAgICAgICAgICB0aGlzLl9zdWJtaXRCdXR0b25FbC5kaXNhYmxlZCA9IGZhbHNlO1xyXG4gICAgICAgICAgICB0aGlzLl9zdWJtaXRCdXR0b25FbC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbkVsLmRpc2FibGVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgdGhpcy5fc3VibWl0QnV0dG9uRWwuY2xhc3NMaXN0LmFkZCh0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG5cclxuICAgIF9oaWRlSW5wdXRFcnJvcihpbnB1dEVsKSB7XHJcbiAgICAgICAgY29uc3QgZXJyb3JTcGFuID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yKFwiI1wiICsgaW5wdXRFbC5pZCArIFwiLWVycm9yXCIpO1xyXG4gICAgICAgIGVycm9yU3Bhbi50ZXh0Q29udGVudCA9IFwiXCI7XHJcbiAgICAgICAgaW5wdXRFbC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2FjdGl2ZUlucHV0RXJyb3JDbGFzcyk7XHJcbiAgICB9XHJcblxyXG4gICAgX3Nob3dJbnB1dEVycm9yID0gKGlucHV0RWwpID0+IHtcclxuICAgICAgICBjb25zdCBlcnJvclNwYW4gPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3IoXCIjXCIgKyBpbnB1dEVsLmlkICsgXCItZXJyb3JcIik7XHJcbiAgICAgICAgZXJyb3JTcGFuLnRleHRDb250ZW50ID0gaW5wdXRFbC52YWxpZGF0aW9uTWVzc2FnZTtcclxuICAgICAgICBpbnB1dEVsLmNsYXNzTGlzdC5hZGQodGhpcy5fYWN0aXZlSW5wdXRFcnJvckNsYXNzKTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsKSB7XHJcbiAgICAgICAgaWYoaW5wdXRFbC52YWxpZGl0eS52YWxpZCkge1xyXG4gICAgICAgICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dEVsKVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuX3Nob3dJbnB1dEVycm9yKGlucHV0RWwpO1xyXG4gICAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgICAgIHRoaXMuX2lucHV0RWxlbWVudHMgPSBBcnJheS5mcm9tKHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvckFsbCh0aGlzLl9pbnB1dFNlbGVjdG9yKSk7XHJcbiAgICAgICAgdGhpcy5fc3VibWl0QnV0dG9uRWwgPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3IodGhpcy5fc3VibWl0QnV0dG9uU2VsZWN0b3IpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIHRoaXMuX2lucHV0RWxlbWVudHMuZm9yRWFjaCgoaW5wdXRFbCkgPT4geyBcclxuICAgICAgICAgICAgaW5wdXRFbC5hZGRFdmVudExpc3RlbmVyKFwiaW5wdXRcIiwgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0RWwpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fdG9nZ2xlQnV0dG9uKCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGVuYWJsZVZhbGlkYXRpb24oKSB7XHJcbiAgICAgICAgdGhpcy5fZm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChlKSA9PiBlLnByZXZlbnREZWZhdWx0KCkpO1xyXG4gICAgICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7IFxyXG4gICAgfVxyXG5cclxuICAgIHJlbW92ZVZhbGlkYXRpb25FcnJvcnMoKSB7XHJcbiAgICAgICAgY29uc3QgaW5wdXRFbGVtZW50cyA9IFsuLi50aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5faW5wdXRTZWxlY3RvcildO1xyXG4gICAgICAgIGlucHV0RWxlbWVudHMuZm9yRWFjaCgoaW5wdXRFbCkgPT4ge1xyXG4gICAgICAgICAgICBpbnB1dEVsLmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fYWN0aXZlSW5wdXRFcnJvckNsYXNzKTsgXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGNvbnN0IGVycm9yRWxlbWVudHMgPSBbLi4udGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yQWxsKHRoaXMuX2lucHV0RXJyb3JDbGFzcyldO1xyXG4gICAgICAgIGVycm9yRWxlbWVudHMuZm9yRWFjaCgoZXJyb3JFbCkgPT4ge1xyXG4gICAgICAgICAgICBlcnJvckVsLnRleHRDb250ZW50ID0gXCJcIjtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBkaXNhYmxlU3VibWl0QnV0dG9uKCkge1xyXG4gICAgICAgIGNvbnN0IHN1Ym1pdEJ1dHRvbkVsZW1lbnRzID0gWy4uLnRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvckFsbCh0aGlzLl9zdWJtaXRCdXR0b25TZWxlY3RvcildO1xyXG4gICAgICAgIHN1Ym1pdEJ1dHRvbkVsZW1lbnRzLmZvckVhY2goKHN1Ym1pdEJ1dHRvbkVsKSA9PiB7XHJcbiAgICAgICAgICAgIHN1Ym1pdEJ1dHRvbkVsLmRpc2FibGVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgc3VibWl0QnV0dG9uRWwuY2xhc3NMaXN0LmFkZCh0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxufSIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIENhcmQge1xyXG4gICAgY29uc3RydWN0b3Ioe2RhdGEsIGN1cnJlbnRVc2VySWQsIGhhbmRsZUNhcmRDbGljaywgaGFuZGxlTGlrZUJ1dHRvbiwgaGFuZGxlRGVsZXRlQnV0dG9uLCBjYXJkU2VsZWN0b3J9KSB7XHJcbiAgICAgICAgdGhpcy5fbmFtZSA9IGRhdGEubmFtZTtcclxuICAgICAgICB0aGlzLl9saW5rID0gZGF0YS5saW5rO1xyXG4gICAgICAgIHRoaXMuX2lkID0gZGF0YS5faWQ7XHJcbiAgICAgICAgdGhpcy5fbGlrZXMgPSBkYXRhLmxpa2VzO1xyXG4gICAgICAgIHRoaXMuX293bmVySWQgPSBkYXRhLm93bmVyLl9pZDtcclxuICAgICAgICB0aGlzLl91c2VySWQgPSBjdXJyZW50VXNlcklkO1xyXG4gICAgICAgIFxyXG4gICAgICAgIHRoaXMuX2hhbmRsZUNhcmRDbGljayA9IGhhbmRsZUNhcmRDbGljaztcclxuICAgICAgICB0aGlzLl9oYW5kbGVMaWtlQnV0dG9uID0gaGFuZGxlTGlrZUJ1dHRvbjtcclxuICAgICAgICB0aGlzLl9oYW5kbGVEZWxldGVCdXR0b24gPSBoYW5kbGVEZWxldGVCdXR0b247XHJcbiAgICAgICAgdGhpcy5fY2FyZFNlbGVjdG9yID0gY2FyZFNlbGVjdG9yO1xyXG4gICAgfVxyXG5cclxuICAgIF9yZW5kZXJEZWxldGVCdXR0b24oKSB7XHJcbiAgICAgICAgaWYodGhpcy5fb3duZXJJZCA9PT0gdGhpcy5fdXNlcklkKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2NhcmREZWxldGVCdXR0b24uY2xhc3NMaXN0LmFkZChcImNhcmRfX2RlbGV0ZS1idXR0b25fYWN0aXZlXCIpO1xyXG4gICAgICAgICAgICB0aGlzLl9jYXJkRGVsZXRlQnV0dG9uLmRpc2FibGVkID0gZmFsc2U7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5fY2FyZERlbGV0ZUJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKFwiY2FyZF9fZGVsZXRlLWJ1dHRvbl9hY3RpdmVcIik7XHJcbiAgICAgICAgICAgIHRoaXMuX2NhcmREZWxldGVCdXR0b24uZGlzYWJsZWQgPSB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICAgICAgdGhpcy5fY2FyZExpa2VCdXR0b24gPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fbGlrZS1idXR0b25cIik7XHJcbiAgICAgICAgdGhpcy5fY2FyZERlbGV0ZUJ1dHRvbiA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19kZWxldGUtYnV0dG9uXCIpO1xyXG5cclxuICAgICAgICB0aGlzLl9pbWFnZS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4gdGhpcy5faGFuZGxlQ2FyZENsaWNrKCkpO1xyXG4gICAgICAgIHRoaXMuX2NhcmRMaWtlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB0aGlzLl9oYW5kbGVMaWtlQnV0dG9uKCkpO1xyXG4gICAgICAgIHRoaXMuX2NhcmREZWxldGVCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHRoaXMuX2hhbmRsZURlbGV0ZUJ1dHRvbigpKTtcclxuICAgIH1cclxuXHJcbiAgICBfcmVuZGVyTGlrZXMoKSB7XHJcbiAgICAgICAgdGhpcy5fY2FyZExpa2VzQ291bnRlciA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19saWtlLWNvdW50ZXJcIik7XHJcbiAgICAgICAgdGhpcy5fY2FyZExpa2VzQ291bnRlci50ZXh0Q29udGVudCA9IHRoaXMuX2xpa2VzLmxlbmd0aDtcclxuXHJcbiAgICAgICAgY29uc3QgaXNMaWtlZCA9IHRoaXMuX2xpa2VzLnNvbWUobGlrZSA9PiBsaWtlLl9pZCA9PT0gdGhpcy5fdXNlcklkKTtcclxuXHJcbiAgICAgICAgaWYoaXNMaWtlZCkge1xyXG4gICAgICAgICAgICB0aGlzLl9jYXJkTGlrZUJ1dHRvbi5jbGFzc0xpc3QuYWRkKFwiY2FyZF9fbGlrZS1idXR0b25fYWN0aXZlXCIpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2NhcmRMaWtlQnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUoXCJjYXJkX19saWtlLWJ1dHRvbl9hY3RpdmVcIik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHVwZGF0ZUxpa2VzKGRhdGEpIHtcclxuICAgICAgICB0aGlzLl9saWtlcyA9IGRhdGEubGlrZXM7XHJcbiAgICAgICAgdGhpcy5fcmVuZGVyTGlrZXMoKTtcclxuICAgIH1cclxuXHJcbiAgICBfZ2V0VGVtcGxhdGUoKSB7XHJcbiAgICAgICAgcmV0dXJuIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodGhpcy5fY2FyZFNlbGVjdG9yKS5jb250ZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZFwiKS5jbG9uZU5vZGUodHJ1ZSk7XHJcbiAgICB9XHJcblxyXG4gICAgZ2VuZXJhdGVDYXJkKCkge1xyXG4gICAgICAgIHRoaXMuX2VsZW1lbnQgPSB0aGlzLl9nZXRUZW1wbGF0ZSgpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX190aXRsZVwiKS50ZXh0Q29udGVudCA9IHRoaXMuX25hbWU7XHJcbiAgICAgICAgdGhpcy5faW1hZ2UgPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9faW1hZ2VcIik7XHJcbiAgICAgICAgdGhpcy5faW1hZ2Uuc3R5bGUuYmFja2dyb3VuZEltYWdlID0gYHVybCgke3RoaXMuX2xpbmt9KWA7XHJcblxyXG4gICAgICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgICAgICAgdGhpcy5fcmVuZGVyRGVsZXRlQnV0dG9uKCk7XHJcbiAgICAgICAgdGhpcy5fcmVuZGVyTGlrZXMoKTtcclxuICAgICAgICBcclxuICAgICAgICByZXR1cm4gdGhpcy5fZWxlbWVudDtcclxuICAgIH1cclxufVxyXG5cclxuXHJcblxyXG4iLCJpbXBvcnQgJ3JlZ2VuZXJhdG9yLXJ1bnRpbWUvcnVudGltZSc7XHJcbmltcG9ydCBcIi4uL3BhZ2VzL2luZGV4LmNzc1wiO1xyXG5pbXBvcnQge2hlYWRlckxvZ28sIHByb2ZpbGVOYW1lLCBwcm9maWxlUHJvZmVzc2lvbiwgcHJvZmlsZUF2YXRhciwgcHJvZmlsZUVkaXRCdXR0b24sXHJcbiAgICAgICBhdmF0YXJCdXR0b24sIGVkaXRNb2RhbEVsLCBlZGl0Rm9ybU1vZGFsLCBlZGl0QXZhdGFyRWwsIGVkaXRBdmF0YXJGb3JtTW9kYWwsIG1vZGFsSW5wdXROYW1lLFxyXG4gICAgICAgbW9kYWxJbnB1dFByb2Zlc3Npb24sIGNhcmRBZGRCdXR0b24sIGFkZE1vZGFsRWwsIGFkZEZvcm1Nb2RhbCwgY2FyZFNlbGVjdG9yLCBwbGFjZXNMaXN0LFxyXG4gICAgICAgaW1hZ2VDbG9zZXVwUHJldmlld0VsLCBpbWFnZVByZXZpZXdFbCwgY2FwdGlvblByZXZpZXdFbCwgZGVsZXRlTW9kYWxFbCwgZm9ybVNldHRpbmdzfVxyXG4gICAgICAgZnJvbSBcIi4uL3V0aWxzL2NvbnN0YW50cy5qc1wiO1xyXG5pbXBvcnQgaGVhZGVySW1hZ2UgZnJvbSBcIi4uL2ltYWdlcy9oZWFkZXJfX2xvZ28uc3ZnXCI7XHJcbmltcG9ydCBhdmF0YXJCdXR0b25JbWFnZSBmcm9tIFwiLi4vaW1hZ2VzL3Byb2ZpbGVfX2VkaXQtYnV0dG9uLXNpZ24uc3ZnXCI7XHJcbmltcG9ydCBBcGkgZnJvbSBcIi4uL2NvbXBvbmVudHMvYXBpLmpzXCI7XHJcbmltcG9ydCBVc2VySW5mbyBmcm9tIFwiLi4vY29tcG9uZW50cy91c2VyLWluZm8uanNcIjtcclxuaW1wb3J0IFNlY3Rpb24gZnJvbSBcIi4uL2NvbXBvbmVudHMvc2VjdGlvbi5qc1wiO1xyXG5pbXBvcnQgUG9wdXBXaXRoSW1hZ2UgZnJvbSBcIi4uL2NvbXBvbmVudHMvcG9wdXAtd2l0aC1pbWFnZVwiO1xyXG5pbXBvcnQgUG9wdXBXaXRoRm9ybSBmcm9tIFwiLi4vY29tcG9uZW50cy9wb3B1cC13aXRoLWZvcm0uanNcIjtcclxuaW1wb3J0IFBvcHVwV2l0aFZlcmlmaWNhdGlvbiBmcm9tICcuLi9jb21wb25lbnRzL3BvcHVwLXdpdGgtdmVyaWZpY2F0aW9uJztcclxuaW1wb3J0IEZvcm1WYWxpZGF0b3IgZnJvbSBcIi4uL2NvbXBvbmVudHMvZm9ybS12YWxpZGF0b3IuanNcIjtcclxuaW1wb3J0IHtyZW5kZXJDYXJkfSBmcm9tIFwiLi4vdXRpbHMvdXRpbHMuanNcIjtcclxuXHJcblxyXG4vLyAqKiogQXBpICoqKlxyXG5jb25zdCBhcGkgPSBuZXcgQXBpKHtcclxuICAgIGJhc2VVcmw6IFwiaHR0cHM6Ly9hcm91bmQubm9tb3JlcGFydGllcy5jby92MS9ncm91cC0xM1wiLFxyXG4gICAgYXV0aFRva2VuOiBcIjQ4N2Q1N2ZkLTBjMDQtNGNhZi1hN2ZjLTYwMTZmZDQ3Yzc4NFwiXHJcbn0pO1xyXG5cclxuXHJcbi8vICoqKiBQcm9maWxlICoqKlxyXG5oZWFkZXJMb2dvLnNyYyA9IGhlYWRlckltYWdlO1xyXG5hdmF0YXJCdXR0b24uc3JjID0gYXZhdGFyQnV0dG9uSW1hZ2U7XHJcblxyXG5cclxuY29uc3QgdXNlckluZm8gPSBuZXcgVXNlckluZm8ocHJvZmlsZU5hbWUsIHByb2ZpbGVQcm9mZXNzaW9uLCBwcm9maWxlQXZhdGFyKTtcclxuXHJcbmFwaS5nZXRVc2VySW5mbygpLnRoZW4oZGF0YSA9PiB7XHJcbiAgICB1c2VySW5mby5zZXRVc2VySW5mbyhkYXRhKTtcclxufSlcclxuLmNhdGNoKGVyciA9PiBjb25zb2xlLmxvZyhgRXJyb3I6ICR7ZXJyfWApKTtcclxuXHJcblxyXG4vLyAqKiogT3JpZ2luYWwgQ2FyZHMgKioqXHJcbmNvbnN0IGltYWdlUG9wdXAgPSBuZXcgUG9wdXBXaXRoSW1hZ2UoaW1hZ2VDbG9zZXVwUHJldmlld0VsKTtcclxuXHJcblxyXG5jb25zdCBkZWxldGVGb3JtUG9wdXAgPSBuZXcgUG9wdXBXaXRoVmVyaWZpY2F0aW9uKGRlbGV0ZU1vZGFsRWwsIChjYXJkSWQsIGNhcmRFbGVtZW50KSA9PiB7XHJcbiAgICBhcGkuZGVsZXRlQ2FyZChjYXJkSWQpXHJcbiAgICAudGhlbigoKSA9PiBjYXJkRWxlbWVudC5yZW1vdmUoKSlcclxuICAgIC50aGVuKCgpID0+IGRlbGV0ZUZvcm1Qb3B1cC5jbG9zZSgpKVxyXG4gICAgLmNhdGNoKGVyciA9PiBjb25zb2xlLmxvZyhgRXJyb3I6ICR7ZXJyfWApKVxyXG4gICAgLmZpbmFsbHkoKCkgPT4gZGVsZXRlRm9ybVBvcHVwLnRvZ2dsZVNhdmVCdXR0b24oKSk7XHJcbn0pO1xyXG5cclxuXHJcbmNvbnN0IG9yaWdpbmFsQ2FyZHMgPSBuZXcgU2VjdGlvbih7XHJcbiAgICByZW5kZXJlcjogKGl0ZW0pID0+IHJlbmRlckNhcmQoe1xyXG4gICAgICAgICAgICBkYXRhOiBpdGVtLCBcclxuICAgICAgICAgICAgY3VycmVudFVzZXJJZDogdXNlckluZm8uZ2V0SWQoKSxcclxuICAgICAgICAgICAgaGFuZGxlQ2FyZENsaWNrOiBmdW5jdGlvbiBoYW5kbGVDYXJkQ2xpY2soKSB7XHJcbiAgICAgICAgICAgICAgICBpbWFnZVBvcHVwLm9wZW4odGhpcy5fbGluaywgdGhpcy5fbmFtZSk7XHJcbiAgICAgICAgICAgICAgICBpbWFnZVByZXZpZXdFbC5zcmMgPSB0aGlzLl9saW5rO1xyXG4gICAgICAgICAgICAgICAgaW1hZ2VQcmV2aWV3RWwuYWx0ID0gdGhpcy5fbmFtZTtcclxuICAgICAgICAgICAgICAgIGNhcHRpb25QcmV2aWV3RWwudGV4dENvbnRlbnQgPSB0aGlzLl9uYW1lO1xyXG4gICAgICAgICAgICB9LCBcclxuICAgICAgICAgICAgaGFuZGxlTGlrZUJ1dHRvbjogZnVuY3Rpb24gaGFuZGxlTGlrZUJ1dHRvbigpIHtcclxuICAgICAgICAgICAgICAgIGlmKCF0aGlzLl9jYXJkTGlrZUJ1dHRvbi5jbGFzc0xpc3QuY29udGFpbnMoXCJjYXJkX19saWtlLWJ1dHRvbl9hY3RpdmVcIikpIHtcclxuICAgICAgICAgICAgICAgICAgICBhcGkuYWRkTGlrZSh0aGlzLl9pZClcclxuICAgICAgICAgICAgICAgICAgICAudGhlbigoZGF0YSkgPT4gdGhpcy51cGRhdGVMaWtlcyhkYXRhKSlcclxuICAgICAgICAgICAgICAgICAgICAuY2F0Y2goZXJyID0+IGNvbnNvbGUubG9nKGBFcnJvcjogJHtlcnJ9YCkpXHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGFwaS5kZWxldGVMaWtlKHRoaXMuX2lkKVxyXG4gICAgICAgICAgICAgICAgICAgIC50aGVuKChkYXRhKSA9PiB0aGlzLnVwZGF0ZUxpa2VzKGRhdGEpKVxyXG4gICAgICAgICAgICAgICAgICAgIC5jYXRjaChlcnIgPT4gY29uc29sZS5sb2coYEVycm9yOiAke2Vycn1gKSlcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgaGFuZGxlRGVsZXRlQnV0dG9uOiBmdW5jdGlvbiBoYW5kbGVEZWxldGVCdXR0b24oKSB7XHJcbiAgICAgICAgICAgICAgICBkZWxldGVGb3JtUG9wdXAub3BlbihpdGVtLl9pZCwgdGhpcy5fZWxlbWVudCk7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGNhcmRTZWxlY3RvcjogY2FyZFNlbGVjdG9yXHJcbiAgICAgICAgfSlcclxufSwgcGxhY2VzTGlzdCk7XHJcblxyXG5cclxuYXBpLmdldENhcmRzKCkudGhlbihkYXRhID0+IHtcclxuICAgIG9yaWdpbmFsQ2FyZHMucmVuZGVySXRlbXMoZGF0YSlcclxufSlcclxuLmNhdGNoKGVyciA9PiBjb25zb2xlLmxvZyhgRXJyb3I6ICR7ZXJyfWApKTtcclxuXHJcblxyXG4vLyAqKiogRm9ybXMgKioqXHJcbmNvbnN0IGVkaXRGb3JtUG9wdXAgPSBuZXcgUG9wdXBXaXRoRm9ybShlZGl0TW9kYWxFbCwgKGRhdGEpID0+IHtcclxuICAgIGFwaS5lZGl0VXNlckluZm8oZGF0YSkudGhlbihkYXRhID0+IHtcclxuICAgICAgICB1c2VySW5mby5zZXRVc2VySW5mbyhkYXRhKTtcclxuICAgICAgICBlZGl0Rm9ybVBvcHVwLmNsb3NlKCk7XHJcbiAgICB9KVxyXG4gICAgLmNhdGNoKGVyciA9PiBjb25zb2xlLmxvZyhgRXJyb3I6ICR7ZXJyfWApKVxyXG4gICAgLmZpbmFsbHkoKCkgPT4gZWRpdEZvcm1Qb3B1cC50b2dnbGVTYXZlQnV0dG9uKCkpO1xyXG59KTtcclxuXHJcblxyXG5jb25zdCBlZGl0QXZhdGFyRm9ybVBvcHVwID0gbmV3IFBvcHVwV2l0aEZvcm0oZWRpdEF2YXRhckVsLCAoZGF0YSkgPT4ge1xyXG4gICAgYXBpLmVkaXRVc2VyQXZhdGFyKGRhdGEpLnRoZW4oZGF0YSA9PiB7XHJcbiAgICAgICAgdXNlckluZm8uc2V0VXNlckF2YXRhcihkYXRhKTtcclxuICAgICAgICBlZGl0QXZhdGFyRm9ybVBvcHVwLmNsb3NlKCk7XHJcbiAgICB9KVxyXG4gICAgLmNhdGNoKGVyciA9PiBjb25zb2xlLmxvZyhgRXJyb3I6ICR7ZXJyfWApKVxyXG4gICAgLmZpbmFsbHkoKCkgPT4gZWRpdEF2YXRhckZvcm1Qb3B1cC50b2dnbGVTYXZlQnV0dG9uKCkpO1xyXG59KTtcclxuXHJcblxyXG5jb25zdCBhZGRGb3JtUG9wdXAgPSBuZXcgUG9wdXBXaXRoRm9ybShhZGRNb2RhbEVsLCAoZGF0YSkgPT4ge1xyXG4gICAgYXBpLmFkZENhcmQoZGF0YSkudGhlbihkYXRhID0+IHtcclxuICAgICAgICBvcmlnaW5hbENhcmRzLmFkZEl0ZW0oZGF0YSk7XHJcbiAgICAgICAgYWRkRm9ybVBvcHVwLmNsb3NlKCk7XHJcbiAgICB9KVxyXG4gICAgLmNhdGNoKGVyciA9PiBjb25zb2xlLmxvZyhgRXJyb3I6ICR7ZXJyfWApKVxyXG4gICAgLmZpbmFsbHkoKCkgPT4gYWRkRm9ybVBvcHVwLnRvZ2dsZVNhdmVCdXR0b24oKSk7XHJcbn0pO1xyXG5cclxuXHJcbi8vICoqKiBCdXR0b25zICoqKlxyXG5wcm9maWxlRWRpdEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgZWRpdEZvcm1Qb3B1cC5vcGVuKCk7XHJcbiAgICBlZGl0Rm9ybVBvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgICBlZGl0Rm9ybVZhbGlkYXRvci5yZW1vdmVWYWxpZGF0aW9uRXJyb3JzKCk7XHJcbiAgICBlZGl0Rm9ybVZhbGlkYXRvci5kaXNhYmxlU3VibWl0QnV0dG9uKCk7XHJcblxyXG4gICAgY29uc3QgZ2V0VXNlckluZm8gPSB1c2VySW5mby5nZXRVc2VySW5mbygpO1xyXG4gICAgbW9kYWxJbnB1dE5hbWUudmFsdWUgPSBnZXRVc2VySW5mby5uYW1lLFxyXG4gICAgbW9kYWxJbnB1dFByb2Zlc3Npb24udmFsdWUgPSBnZXRVc2VySW5mby5wcm9mZXNzaW9uO1xyXG59KTtcclxuXHJcblxyXG5wcm9maWxlQXZhdGFyLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICBlZGl0QXZhdGFyRm9ybVBvcHVwLm9wZW4oKTtcclxuICAgIGVkaXRBdmF0YXJGb3JtUG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICAgIGVkaXRBdmF0YXJGb3JtVmFsaWRhdG9yLnJlbW92ZVZhbGlkYXRpb25FcnJvcnMoKTtcclxuICAgIGVkaXRBdmF0YXJGb3JtVmFsaWRhdG9yLmRpc2FibGVTdWJtaXRCdXR0b24oKTtcclxufSk7XHJcblxyXG5cclxuY2FyZEFkZEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgYWRkRm9ybVBvcHVwLm9wZW4oKTtcclxuICAgIGFkZEZvcm1Qb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xyXG4gICAgYWRkRm9ybVZhbGlkYXRvci5yZW1vdmVWYWxpZGF0aW9uRXJyb3JzKCk7XHJcbiAgICBhZGRGb3JtVmFsaWRhdG9yLmRpc2FibGVTdWJtaXRCdXR0b24oKTtcclxufSk7XHJcblxyXG5cclxuLy8gKioqIEZvcm1WYWxpZGF0b3IgKioqIFxyXG5jb25zdCBlZGl0Rm9ybVZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKGZvcm1TZXR0aW5ncywgZWRpdEZvcm1Nb2RhbCk7XHJcbmNvbnN0IGFkZEZvcm1WYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihmb3JtU2V0dGluZ3MsIGFkZEZvcm1Nb2RhbCk7XHJcbmNvbnN0IGVkaXRBdmF0YXJGb3JtVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IoZm9ybVNldHRpbmdzLCBlZGl0QXZhdGFyRm9ybU1vZGFsKTtcclxuXHJcblxyXG5cclxuZWRpdEZvcm1WYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xyXG5hZGRGb3JtVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcclxuZWRpdEF2YXRhckZvcm1WYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpOyIsImltcG9ydCBDYXJkIGZyb20gXCIuLi9jb21wb25lbnRzL2NhcmQuanNcIjtcclxuXHJcbmZ1bmN0aW9uIHJlbmRlckNhcmQoe2RhdGEsIGN1cnJlbnRVc2VySWQsIGhhbmRsZUNhcmRDbGljaywgaGFuZGxlTGlrZUJ1dHRvbiwgaGFuZGxlRGVsZXRlQnV0dG9uLCBjYXJkU2VsZWN0b3J9KSB7XHJcbiAgICBjb25zdCBjYXJkID0gbmV3IENhcmQoe2RhdGEsIGN1cnJlbnRVc2VySWQsIGhhbmRsZUNhcmRDbGljaywgaGFuZGxlTGlrZUJ1dHRvbiwgaGFuZGxlRGVsZXRlQnV0dG9uLCBjYXJkU2VsZWN0b3J9KTtcclxuICAgIGNvbnN0IGNhcmRFbGVtZW50ID0gY2FyZC5nZW5lcmF0ZUNhcmQoKTtcclxuICAgIHJldHVybiBjYXJkRWxlbWVudDtcclxufVxyXG5cclxuZXhwb3J0IHtyZW5kZXJDYXJkfTsiXSwibmFtZXMiOlsicnVudGltZSIsImV4cG9ydHMiLCJ1bmRlZmluZWQiLCJPcCIsIk9iamVjdCIsInByb3RvdHlwZSIsImhhc093biIsImhhc093blByb3BlcnR5IiwiJFN5bWJvbCIsIlN5bWJvbCIsIml0ZXJhdG9yU3ltYm9sIiwiaXRlcmF0b3IiLCJhc3luY0l0ZXJhdG9yU3ltYm9sIiwiYXN5bmNJdGVyYXRvciIsInRvU3RyaW5nVGFnU3ltYm9sIiwidG9TdHJpbmdUYWciLCJkZWZpbmUiLCJvYmoiLCJrZXkiLCJ2YWx1ZSIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImNvbmZpZ3VyYWJsZSIsIndyaXRhYmxlIiwiZXJyIiwid3JhcCIsImlubmVyRm4iLCJvdXRlckZuIiwic2VsZiIsInRyeUxvY3NMaXN0IiwicHJvdG9HZW5lcmF0b3IiLCJHZW5lcmF0b3IiLCJnZW5lcmF0b3IiLCJjcmVhdGUiLCJjb250ZXh0IiwiQ29udGV4dCIsIl9pbnZva2UiLCJzdGF0ZSIsIkdlblN0YXRlU3VzcGVuZGVkU3RhcnQiLCJtZXRob2QiLCJhcmciLCJHZW5TdGF0ZUV4ZWN1dGluZyIsIkVycm9yIiwiR2VuU3RhdGVDb21wbGV0ZWQiLCJkb25lUmVzdWx0IiwiZGVsZWdhdGUiLCJkZWxlZ2F0ZVJlc3VsdCIsIm1heWJlSW52b2tlRGVsZWdhdGUiLCJDb250aW51ZVNlbnRpbmVsIiwic2VudCIsIl9zZW50IiwiZGlzcGF0Y2hFeGNlcHRpb24iLCJhYnJ1cHQiLCJyZWNvcmQiLCJ0cnlDYXRjaCIsInR5cGUiLCJkb25lIiwiR2VuU3RhdGVTdXNwZW5kZWRZaWVsZCIsIm1ha2VJbnZva2VNZXRob2QiLCJmbiIsImNhbGwiLCJHZW5lcmF0b3JGdW5jdGlvbiIsIkdlbmVyYXRvckZ1bmN0aW9uUHJvdG90eXBlIiwiSXRlcmF0b3JQcm90b3R5cGUiLCJ0aGlzIiwiZ2V0UHJvdG8iLCJnZXRQcm90b3R5cGVPZiIsIk5hdGl2ZUl0ZXJhdG9yUHJvdG90eXBlIiwidmFsdWVzIiwiR3AiLCJkZWZpbmVJdGVyYXRvck1ldGhvZHMiLCJmb3JFYWNoIiwiQXN5bmNJdGVyYXRvciIsIlByb21pc2VJbXBsIiwiaW52b2tlIiwicmVzb2x2ZSIsInJlamVjdCIsInJlc3VsdCIsIl9fYXdhaXQiLCJ0aGVuIiwidW53cmFwcGVkIiwiZXJyb3IiLCJwcmV2aW91c1Byb21pc2UiLCJjYWxsSW52b2tlV2l0aE1ldGhvZEFuZEFyZyIsIlR5cGVFcnJvciIsImluZm8iLCJyZXN1bHROYW1lIiwibmV4dCIsIm5leHRMb2MiLCJwdXNoVHJ5RW50cnkiLCJsb2NzIiwiZW50cnkiLCJ0cnlMb2MiLCJjYXRjaExvYyIsImZpbmFsbHlMb2MiLCJhZnRlckxvYyIsInRyeUVudHJpZXMiLCJwdXNoIiwicmVzZXRUcnlFbnRyeSIsImNvbXBsZXRpb24iLCJyZXNldCIsIml0ZXJhYmxlIiwiaXRlcmF0b3JNZXRob2QiLCJpc05hTiIsImxlbmd0aCIsImkiLCJkaXNwbGF5TmFtZSIsImlzR2VuZXJhdG9yRnVuY3Rpb24iLCJnZW5GdW4iLCJjdG9yIiwiY29uc3RydWN0b3IiLCJuYW1lIiwibWFyayIsInNldFByb3RvdHlwZU9mIiwiX19wcm90b19fIiwiYXdyYXAiLCJhc3luYyIsIlByb21pc2UiLCJpdGVyIiwia2V5cyIsIm9iamVjdCIsInJldmVyc2UiLCJwb3AiLCJza2lwVGVtcFJlc2V0IiwicHJldiIsImNoYXJBdCIsInNsaWNlIiwic3RvcCIsInJvb3RSZWNvcmQiLCJydmFsIiwiZXhjZXB0aW9uIiwiaGFuZGxlIiwibG9jIiwiY2F1Z2h0IiwiaGFzQ2F0Y2giLCJoYXNGaW5hbGx5IiwiZmluYWxseUVudHJ5IiwiY29tcGxldGUiLCJmaW5pc2giLCJ0aHJvd24iLCJkZWxlZ2F0ZVlpZWxkIiwibW9kdWxlIiwicmVnZW5lcmF0b3JSdW50aW1lIiwiYWNjaWRlbnRhbFN0cmljdE1vZGUiLCJnbG9iYWxUaGlzIiwiRnVuY3Rpb24iLCJfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18iLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJjYWNoZWRNb2R1bGUiLCJpZCIsImxvYWRlZCIsIl9fd2VicGFja19tb2R1bGVzX18iLCJubWQiLCJwYXRocyIsImNoaWxkcmVuIiwicCIsImVkaXRGb3JtTW9kYWwiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJlZGl0QXZhdGFyRm9ybU1vZGFsIiwiYWRkRm9ybU1vZGFsIiwicGxhY2VzTGlzdCIsInByb2ZpbGVFZGl0QnV0dG9uIiwiY2FyZEFkZEJ1dHRvbiIsIm1vZGFsSW5wdXROYW1lIiwicXVlcnlTZWxlY3RvckFsbCIsIm1vZGFsSW5wdXRQcm9mZXNzaW9uIiwiZm9ybVNldHRpbmdzIiwiX2lucHV0U2VsZWN0b3IiLCJfc3VibWl0QnV0dG9uU2VsZWN0b3IiLCJfaW5wdXRFcnJvckNsYXNzIiwiX2FjdGl2ZUlucHV0RXJyb3JDbGFzcyIsIl9pbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiaW1hZ2VQcmV2aWV3RWwiLCJjYXB0aW9uUHJldmlld0VsIiwiaGVhZGVyTG9nbyIsImF2YXRhckJ1dHRvbiIsInByb2ZpbGVBdmF0YXIiLCJBcGkiLCJiYXNlVXJsIiwiYXV0aFRva2VuIiwiX2Jhc2VVcmwiLCJfYXV0aFRva2VuIiwiZmV0Y2giLCJoZWFkZXJzIiwiYXV0aG9yaXphdGlvbiIsInJlcyIsIl9nZXRSZXNwb25zZURhdGEiLCJkYXRhIiwiYm9keSIsIkpTT04iLCJzdHJpbmdpZnkiLCJhYm91dCIsImF2YXRhciIsImxpbmsiLCJjYXJkSWQiLCJvayIsImpzb24iLCJzdGF0dXMiLCJVc2VySW5mbyIsInByb2ZpbGVOYW1lIiwicHJvZmlsZVByb2Zlc3Npb24iLCJfcHJvZmlsZU5hbWUiLCJfcHJvZmlsZVByb2Zlc3Npb24iLCJfcHJvZmlsZUF2YXRhciIsInRleHRDb250ZW50IiwicHJvZmVzc2lvbiIsIl9pZCIsInN0eWxlIiwiYmFja2dyb3VuZEltYWdlIiwiU2VjdGlvbiIsImNvbnRhaW5lclNlbGVjdG9yIiwicmVuZGVyZXIiLCJjYXJkIiwiY2FyZEVsZW1lbnQiLCJfcmVuZGVyZXIiLCJfY29udGFpbmVyIiwicHJlcGVuZCIsIml0ZW1zIiwiYWRkSXRlbSIsIlBvcHVwIiwicG9wdXBTZWxlY3RvciIsImV2dCIsInByZXZlbnREZWZhdWx0IiwiY2xvc2UiLCJ0YXJnZXQiLCJjbGFzc0xpc3QiLCJjb250YWlucyIsIl9wb3B1cEVsZW1lbnQiLCJfaGFuZGxlRXNjVXAiLCJiaW5kIiwiYWRkIiwiYWRkRXZlbnRMaXN0ZW5lciIsInNldEV2ZW50TGlzdGVuZXJzIiwicmVtb3ZlIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsIl9oYW5kbGVDbGljayIsIlBvcHVwV2l0aEltYWdlIiwiaW1hZ2VFbGVtZW50Iiwic3JjIiwiYWx0IiwiUG9wdXBXaXRoRm9ybSIsImhhbmRsZUZvcm1TdWJtaXQiLCJ0b2dnbGVTYXZlQnV0dG9uIiwiX2hhbmRsZUZvcm1TdWJtaXQiLCJfZ2V0SW5wdXRWYWx1ZXMiLCJfcG9wdXBGb3JtIiwiZm9ybVZhbHVlcyIsIl9pbnB1dEVsZW1lbnRzIiwiQXJyYXkiLCJmcm9tIiwiZWxlbWVudHMiLCJpbnB1dCIsIl9zdWJtaXRIYW5kbGVyIiwiX2hhbmRsZVN1Ym1pdCIsInNhdmVCdXR0b24iLCJQb3B1cFdpdGhWZXJpZmljYXRpb24iLCJfY2FyZElkIiwiX2NhcmRFbGVtZW50IiwiRm9ybVZhbGlkYXRvciIsInNldHRpbmdzIiwiZm9ybUVsZW1lbnQiLCJpbnB1dEVsIiwiX2Zvcm0iLCJ2YWxpZGF0aW9uTWVzc2FnZSIsImV2ZXJ5IiwidmFsaWRpdHkiLCJ2YWxpZCIsIl9oYXNWYWxpZElucHV0cyIsIl9zdWJtaXRCdXR0b25FbCIsImRpc2FibGVkIiwiX2hpZGVJbnB1dEVycm9yIiwiX3Nob3dJbnB1dEVycm9yIiwiX2NoZWNrSW5wdXRWYWxpZGl0eSIsIl90b2dnbGVCdXR0b24iLCJlIiwiX3NldEV2ZW50TGlzdGVuZXJzIiwiZXJyb3JFbCIsInN1Ym1pdEJ1dHRvbkVsIiwiQ2FyZCIsImN1cnJlbnRVc2VySWQiLCJoYW5kbGVDYXJkQ2xpY2siLCJoYW5kbGVMaWtlQnV0dG9uIiwiaGFuZGxlRGVsZXRlQnV0dG9uIiwiY2FyZFNlbGVjdG9yIiwiX25hbWUiLCJfbGluayIsIl9saWtlcyIsImxpa2VzIiwiX293bmVySWQiLCJvd25lciIsIl91c2VySWQiLCJfaGFuZGxlQ2FyZENsaWNrIiwiX2hhbmRsZUxpa2VCdXR0b24iLCJfaGFuZGxlRGVsZXRlQnV0dG9uIiwiX2NhcmRTZWxlY3RvciIsIl9jYXJkRGVsZXRlQnV0dG9uIiwiX2NhcmRMaWtlQnV0dG9uIiwiX2VsZW1lbnQiLCJfaW1hZ2UiLCJfY2FyZExpa2VzQ291bnRlciIsInNvbWUiLCJsaWtlIiwiX3JlbmRlckxpa2VzIiwiY29udGVudCIsImNsb25lTm9kZSIsIl9nZXRUZW1wbGF0ZSIsIl9yZW5kZXJEZWxldGVCdXR0b24iLCJhcGkiLCJoZWFkZXJJbWFnZSIsImF2YXRhckJ1dHRvbkltYWdlIiwidXNlckluZm8iLCJnZXRVc2VySW5mbyIsInNldFVzZXJJbmZvIiwiY2F0Y2giLCJjb25zb2xlIiwibG9nIiwiaW1hZ2VQb3B1cCIsImRlbGV0ZUZvcm1Qb3B1cCIsImRlbGV0ZUNhcmQiLCJmaW5hbGx5Iiwib3JpZ2luYWxDYXJkcyIsIml0ZW0iLCJnZXRJZCIsIm9wZW4iLCJkZWxldGVMaWtlIiwidXBkYXRlTGlrZXMiLCJhZGRMaWtlIiwiZ2VuZXJhdGVDYXJkIiwiZ2V0Q2FyZHMiLCJyZW5kZXJJdGVtcyIsImVkaXRGb3JtUG9wdXAiLCJlZGl0VXNlckluZm8iLCJlZGl0QXZhdGFyRm9ybVBvcHVwIiwiZWRpdFVzZXJBdmF0YXIiLCJzZXRVc2VyQXZhdGFyIiwiYWRkRm9ybVBvcHVwIiwiYWRkQ2FyZCIsImVkaXRGb3JtVmFsaWRhdG9yIiwicmVtb3ZlVmFsaWRhdGlvbkVycm9ycyIsImRpc2FibGVTdWJtaXRCdXR0b24iLCJlZGl0QXZhdGFyRm9ybVZhbGlkYXRvciIsImFkZEZvcm1WYWxpZGF0b3IiLCJlbmFibGVWYWxpZGF0aW9uIl0sInNvdXJjZVJvb3QiOiIifQ==